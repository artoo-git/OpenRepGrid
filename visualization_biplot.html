<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Biplots</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="libs/bootstrap-2.3.2/css/united.min.css" rel="stylesheet" />
<link href="libs/bootstrap-2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
<script src="libs/bootstrap-2.3.2/js/bootstrap.min.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style type="text/css">

/* padding for bootstrap navbar */
body {
  padding-top: 50px;
  padding-bottom: 40px;
}
@media (max-width: 979px) {
  body {
    padding-top: 0;
  }
}

/* offset scroll position for anchor links (for fixed navbar)  */
@media (min-width: 980px) {
  .section h2 {
    padding-top: 52px;
    margin-top: -52px;
  }
  .section h3 {
    padding-top: 52px;
    margin-top: -52px;
  }
}


/* don't use link color in navbar */
.dropdown-menu>li>a {
  color: black;
}

/* some padding for disqus */
#disqus_thread {
  margin-top: 45px;
}

</style>

<link rel="stylesheet" href="libs/font-awesome-4.1.0/css/font-awesome.min.css"/>


<!------------------  mailchimp mailing list popover CSS  --------------- -->  

<!-- <link href="//cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css"> -->
<!-- <link href="http://cdn-images.mailchimp.com/embedcode/classic-081711.css" rel="stylesheet" type="text/css"> -->

<style type="text/css">
#mc_embed_signup{
  background:#fff; 
  clear:left; 
  font:16px Helvetica, Arial, sans-serif; 
  width: 460px;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

#mc-embedded-subscribe{
}

body .modal {
  width: 500px;
  /* must be half of the width, minus scrollbar on the left (30px) */
  /* margin-left: -280px; */
  border: 10px solid #CF522E; /*#CA301A; */
  border-radius: 25px;
}

/* MailChimp Form Embed Code - Slim - 08/17/2011 
This is the CSS code normally delivered via CDN. But somehow it did not work out
So I placed it here.
*/
#mc_embed_signup form {display:block; position:relative; text-align:left; padding:10px 0 10px 3%}
#mc_embed_signup h2 {font-weight:bold; padding:0; margin:15px 0; font-size:1.4em;}
#mc_embed_signup input {border:1px solid #999; -webkit-appearance:none;}
#mc_embed_signup input[type=checkbox]{-webkit-appearance:checkbox;}
#mc_embed_signup input[type=radio]{-webkit-appearance:radio;}
#mc_embed_signup input:focus {border-color:#333;}
#mc_embed_signup .button {clear:both; background-color: #aaa; border: 0 none; border-radius:4px; color: #FFFFFF; cursor: pointer; display: inline-block; font-size:15px; font-weight: bold; height: 32px; line-height: 32px; margin: 0 5px 10px 0; padding:0; text-align: center; text-decoration: none; vertical-align: top; white-space: nowrap; width: auto;}
#mc_embed_signup .button:hover {background-color:#777;}
#mc_embed_signup .small-meta {font-size: 11px;}
#mc_embed_signup .nowrap {white-space:nowrap;}     
#mc_embed_signup .clear {clear:none; display:inline;}

#mc_embed_signup label {display:block; font-size:16px; padding-bottom:10px; font-weight:bold;}
#mc_embed_signup input.email {display:block; padding:8px 0; margin:0 4% 10px 0; text-indent:5px; width:58%; min-width:130px;}
#mc_embed_signup input.button {display:block; width:35%; margin:0 0 10px 0; min-width:90px;}

#mc_embed_signup div#mce-responses {float:left; top:-1.4em; padding:0em .5em 0em .5em; overflow:hidden; width:90%;margin: 0 5%; clear: both;}
#mc_embed_signup div.response {margin:1em 0; padding:1em .5em .5em 0; font-weight:bold; float:left; top:-1.5em; z-index:1; width:80%;}
#mc_embed_signup #mce-error-response {display:none;}
#mc_embed_signup #mce-success-response {color:#529214; display:none;}
#mc_embed_signup label.error {display:block; float:none; width:auto; margin-left:1.05em; text-align:left; padding:.5em 0;
</style>


<!-- -----------  to enable mathjax on github pages -----------------  -->

  <script src="http://github.com/javascripts/other/MathJax/MathJax.js"
type="text/javascript">
    if (window.location.protocol == "https:") {
      MathJax.OutputJax.fontDir = "https://github.com/assets/MathJax/fonts"
    } else {
      MathJax.OutputJax.fontDir = "http://github.com/assets/MathJax/fonts"
    }
    MathJax.Hub.Config({
      extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
      jax: ["input/TeX", "output/HTML-CSS"]
    })
  </script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="libs/highlight/textmate.css"
      type="text/css" />
<script src="libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
</style>
<div class="container-fluid main-container">


<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">  
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="brand" href="index.html">OpenRepGrid</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="news.html">News</a></li>
          <li><a href="basics_installation.html">Installation</a></li>
          <!-- <li><a href="quickstart.html">Quick start</a></li> -->
          <!-- <li><a href="quickstart.html">Videos</a></li> -->
          <li class="dropdown">
            <a href="authoring" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
            <ul class="dropdown-menu">
               <li><a href="features.html">Feature overview</a></li>

              <li class="divider"></li>
              <li class="dropdown-submenu">
                  <a href="#">Basics</a>
                  <ul class="dropdown-menu">
                     <li><a href="basics_manipulations.html">Grid manipulations</a></li>
                     <li><a href="settings.html">Settings</a></li>
                     <li><a href="loading.html">Loading and saving grids</a></li>
                  </ul>
               </li>

               <li class="divider"></li>
               <li class="nav-header">Single grid analysis</li>

               <li class="dropdown-submenu">
                  <a href="#">Analyzing constructs</a>
                  <ul class="dropdown-menu">
                     <li><a href="constructs_descriptives.html">Descriptive statstics</a></li>
                     <li><a href="constructs_correlation.html">Correlations</a></li>
                     <li><a href="constructs_distances.html">Distances</a></li>
                     <li><a href="constructs_pca.html">PCA</a></li>
                     <li><a href="constructs_cluster.html">Clustering</a></li>
                  </ul>
               </li>

               <li class="dropdown-submenu">
                  <a href="#">Analyzing elements</a>
                  <ul class="dropdown-menu">
                     <li><a href="constructs_descriptives.html">Descriptive statstics</a></li>
                     <li><a href="elements_correlation.html">Correlations</a></li>
                     <li><a href="elements_distances.html">Distances</a></li>
                     <li><a href="elements_distances_standardized.html">Distances (standardized)</a></li>
                     <li><a href="constructs_cluster.html">Clustering</a></li>
                  </ul>
               </li>

               <li class="dropdown-submenu">
                  <a href="#">Visualization</a>
                  <ul class="dropdown-menu">
                     <li><a href="visualization_bertin.html">Bertin display</a></li>
                     <li><a href="visualization_biplot.html">Biplots</a></li>
                  </ul>
               </li>

               <li class="dropdown-submenu">
                  <a href="#">Index measures</a>
                  <ul class="dropdown-menu">
                     <li><a href="measures_intensity.html">Intensity</a></li>
                     <li><a href="measures_pvaff.html">PVAFF</a></li>
                     <li><a href="measures_conflict.html">Cognitive conflicts</a></li>
                     <li><a href="measures_dilemma.html">Implicative dilemmas</a></li>
                  </ul>
               </li>

               <li class="dropdown-submenu">
                  <a href="#">Special features</a>
                  <ul class="dropdown-menu">
                    <li><a href="special_reordering.html">Automatic reordering</a></li>
                  </ul>
               </li>

              </ul>
          </li>
          <li><a href="data.html">Data</a></li>
          <!-- <li><a href="examples.html">Examples</a></li> -->
          <li><a href="contribute.html">Join in!</a></li>
        </ul>
        <!-- Mailing list popover -->
        <ul class="nav pull-right">
        <a class="btn btn-primary" data-toggle="modal" data-target="#myModal">
            <i class="fa fa-envelope-o fa-lg"></i>
            &nbsp;Newsletter
          </a>
          <!--
          <a class="btn btn-primary" href="https://github.com/markheckmann/openrepgrid">
            <i class="fa fa-github fa-lg"></i>
            GitHub
          </a> --> 
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>


<!------------------  BEGIN mailchimp mailing list popover wrapped in boostrap modal dialog  --------------- -->  

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

<div class="modal-body">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>

<!-- Begin MailChimp Signup Form -->
<div id="mc_embed_signup">
<form action="//openrepgrid.us9.list-manage.com/subscribe/post?u=6e301501f8c1ac2241f7eb6c4&amp;id=0236364312" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
<div id="mc_embed_signup_scroll">
<h2>Subscribe to our mailing list</h2>
<p style="color: #555; line-height: 150%;">Stay up to date with OpenRepGrid. 
Don't worry! There will be only a few mails per year ;)</p><br>
<div class="mc-field-group">
<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="email address">
</div>
<br>
<div id="mce-responses" class="clear">
<div class="response" id="mce-error-response" style="display:none"></div>
<div class="response" id="mce-success-response" style="display:none"></div>
</div>    
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_6e301501f8c1ac2241f7eb6c4_0236364312" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
<p><a href="http://us9.campaign-archive1.com/home/?u=6e301501f8c1ac2241f7eb6c4&id=0236364312" title="View previous mails">View previous mails</a></p>
</div>
</form>
</div>

<!--End mc_embed_signup-->

</div>
<!-- <div class="modal-footer">
  <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
</div> -->
</div>

<!------------------  END mailchimp mailing list popover  ----------------->

<div id="header">
<h1 class="title">Biplots</h1>
</div>

<div id="TOC">
<ul>
<li><a href="#description">Description</a></li>
<li><a href="#biplot-functions">Biplot functions</a><ul>
<li><a href="#biplotsimple"><code>biplotSimple</code></a></li>
<li><a href="#biplot2d"><code>biplot2d</code></a></li>
<li><a href="#biplotpseudo3d"><code>biplotPseudo3d</code></a></li>
<li><a href="#biplot3d"><code>biplot3d</code></a></li>
</ul></li>
<li><a href="#pre-transformations">Pre-transformations</a></li>
<li><a href="#standard-biplot-types">Standard biplot types</a><ul>
<li><a href="#element-metric-preserving-biplot">Element metric preserving biplot</a></li>
<li><a href="#slaters-ingrid-biplot">Slater’s INGRID biplot</a></li>
<li><a href="#eigenstructure-analysis-esa-biplot">Eigenstructure analysis (ESA) biplot</a></li>
</ul></li>
<li><a href="#changing-the-appearance">Changing the appearance</a></li>
<li><a href="#calculation-of-biplots">Calculation of biplots</a></li>
<li><a href="#literature">Literature</a></li>
</ul>
</div>

<script type="text/javascript">
CanvasMatrix4=function(m){if(typeof m=='object'){if("length"in m&&m.length>=16){this.load(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]);return}else if(m instanceof CanvasMatrix4){this.load(m);return}}this.makeIdentity()};CanvasMatrix4.prototype.load=function(){if(arguments.length==1&&typeof arguments[0]=='object'){var matrix=arguments[0];if("length"in matrix&&matrix.length==16){this.m11=matrix[0];this.m12=matrix[1];this.m13=matrix[2];this.m14=matrix[3];this.m21=matrix[4];this.m22=matrix[5];this.m23=matrix[6];this.m24=matrix[7];this.m31=matrix[8];this.m32=matrix[9];this.m33=matrix[10];this.m34=matrix[11];this.m41=matrix[12];this.m42=matrix[13];this.m43=matrix[14];this.m44=matrix[15];return}if(arguments[0]instanceof CanvasMatrix4){this.m11=matrix.m11;this.m12=matrix.m12;this.m13=matrix.m13;this.m14=matrix.m14;this.m21=matrix.m21;this.m22=matrix.m22;this.m23=matrix.m23;this.m24=matrix.m24;this.m31=matrix.m31;this.m32=matrix.m32;this.m33=matrix.m33;this.m34=matrix.m34;this.m41=matrix.m41;this.m42=matrix.m42;this.m43=matrix.m43;this.m44=matrix.m44;return}}this.makeIdentity()};CanvasMatrix4.prototype.getAsArray=function(){return[this.m11,this.m12,this.m13,this.m14,this.m21,this.m22,this.m23,this.m24,this.m31,this.m32,this.m33,this.m34,this.m41,this.m42,this.m43,this.m44]};CanvasMatrix4.prototype.getAsWebGLFloatArray=function(){return new WebGLFloatArray(this.getAsArray())};CanvasMatrix4.prototype.makeIdentity=function(){this.m11=1;this.m12=0;this.m13=0;this.m14=0;this.m21=0;this.m22=1;this.m23=0;this.m24=0;this.m31=0;this.m32=0;this.m33=1;this.m34=0;this.m41=0;this.m42=0;this.m43=0;this.m44=1};CanvasMatrix4.prototype.transpose=function(){var tmp=this.m12;this.m12=this.m21;this.m21=tmp;tmp=this.m13;this.m13=this.m31;this.m31=tmp;tmp=this.m14;this.m14=this.m41;this.m41=tmp;tmp=this.m23;this.m23=this.m32;this.m32=tmp;tmp=this.m24;this.m24=this.m42;this.m42=tmp;tmp=this.m34;this.m34=this.m43;this.m43=tmp};CanvasMatrix4.prototype.invert=function(){var det=this._determinant4x4();if(Math.abs(det)<1e-8)return null;this._makeAdjoint();this.m11/=det;this.m12/=det;this.m13/=det;this.m14/=det;this.m21/=det;this.m22/=det;this.m23/=det;this.m24/=det;this.m31/=det;this.m32/=det;this.m33/=det;this.m34/=det;this.m41/=det;this.m42/=det;this.m43/=det;this.m44/=det};CanvasMatrix4.prototype.translate=function(x,y,z){if(x==undefined)x=0;if(y==undefined)y=0;if(z==undefined)z=0;var matrix=new CanvasMatrix4();matrix.m41=x;matrix.m42=y;matrix.m43=z;this.multRight(matrix)};CanvasMatrix4.prototype.scale=function(x,y,z){if(x==undefined)x=1;if(z==undefined){if(y==undefined){y=x;z=x}else z=1}else if(y==undefined)y=x;var matrix=new CanvasMatrix4();matrix.m11=x;matrix.m22=y;matrix.m33=z;this.multRight(matrix)};CanvasMatrix4.prototype.rotate=function(angle,x,y,z){angle=angle/180*Math.PI;angle/=2;var sinA=Math.sin(angle);var cosA=Math.cos(angle);var sinA2=sinA*sinA;var length=Math.sqrt(x*x+y*y+z*z);if(length==0){x=0;y=0;z=1}else if(length!=1){x/=length;y/=length;z/=length}var mat=new CanvasMatrix4();if(x==1&&y==0&&z==0){mat.m11=1;mat.m12=0;mat.m13=0;mat.m21=0;mat.m22=1-2*sinA2;mat.m23=2*sinA*cosA;mat.m31=0;mat.m32=-2*sinA*cosA;mat.m33=1-2*sinA2;mat.m14=mat.m24=mat.m34=0;mat.m41=mat.m42=mat.m43=0;mat.m44=1}else if(x==0&&y==1&&z==0){mat.m11=1-2*sinA2;mat.m12=0;mat.m13=-2*sinA*cosA;mat.m21=0;mat.m22=1;mat.m23=0;mat.m31=2*sinA*cosA;mat.m32=0;mat.m33=1-2*sinA2;mat.m14=mat.m24=mat.m34=0;mat.m41=mat.m42=mat.m43=0;mat.m44=1}else if(x==0&&y==0&&z==1){mat.m11=1-2*sinA2;mat.m12=2*sinA*cosA;mat.m13=0;mat.m21=-2*sinA*cosA;mat.m22=1-2*sinA2;mat.m23=0;mat.m31=0;mat.m32=0;mat.m33=1;mat.m14=mat.m24=mat.m34=0;mat.m41=mat.m42=mat.m43=0;mat.m44=1}else{var x2=x*x;var y2=y*y;var z2=z*z;mat.m11=1-2*(y2+z2)*sinA2;mat.m12=2*(x*y*sinA2+z*sinA*cosA);mat.m13=2*(x*z*sinA2-y*sinA*cosA);mat.m21=2*(y*x*sinA2-z*sinA*cosA);mat.m22=1-2*(z2+x2)*sinA2;mat.m23=2*(y*z*sinA2+x*sinA*cosA);mat.m31=2*(z*x*sinA2+y*sinA*cosA);mat.m32=2*(z*y*sinA2-x*sinA*cosA);mat.m33=1-2*(x2+y2)*sinA2;mat.m14=mat.m24=mat.m34=0;mat.m41=mat.m42=mat.m43=0;mat.m44=1}this.multRight(mat)};CanvasMatrix4.prototype.multRight=function(mat){var m11=(this.m11*mat.m11+this.m12*mat.m21+this.m13*mat.m31+this.m14*mat.m41);var m12=(this.m11*mat.m12+this.m12*mat.m22+this.m13*mat.m32+this.m14*mat.m42);var m13=(this.m11*mat.m13+this.m12*mat.m23+this.m13*mat.m33+this.m14*mat.m43);var m14=(this.m11*mat.m14+this.m12*mat.m24+this.m13*mat.m34+this.m14*mat.m44);var m21=(this.m21*mat.m11+this.m22*mat.m21+this.m23*mat.m31+this.m24*mat.m41);var m22=(this.m21*mat.m12+this.m22*mat.m22+this.m23*mat.m32+this.m24*mat.m42);var m23=(this.m21*mat.m13+this.m22*mat.m23+this.m23*mat.m33+this.m24*mat.m43);var m24=(this.m21*mat.m14+this.m22*mat.m24+this.m23*mat.m34+this.m24*mat.m44);var m31=(this.m31*mat.m11+this.m32*mat.m21+this.m33*mat.m31+this.m34*mat.m41);var m32=(this.m31*mat.m12+this.m32*mat.m22+this.m33*mat.m32+this.m34*mat.m42);var m33=(this.m31*mat.m13+this.m32*mat.m23+this.m33*mat.m33+this.m34*mat.m43);var m34=(this.m31*mat.m14+this.m32*mat.m24+this.m33*mat.m34+this.m34*mat.m44);var m41=(this.m41*mat.m11+this.m42*mat.m21+this.m43*mat.m31+this.m44*mat.m41);var m42=(this.m41*mat.m12+this.m42*mat.m22+this.m43*mat.m32+this.m44*mat.m42);var m43=(this.m41*mat.m13+this.m42*mat.m23+this.m43*mat.m33+this.m44*mat.m43);var m44=(this.m41*mat.m14+this.m42*mat.m24+this.m43*mat.m34+this.m44*mat.m44);this.m11=m11;this.m12=m12;this.m13=m13;this.m14=m14;this.m21=m21;this.m22=m22;this.m23=m23;this.m24=m24;this.m31=m31;this.m32=m32;this.m33=m33;this.m34=m34;this.m41=m41;this.m42=m42;this.m43=m43;this.m44=m44};CanvasMatrix4.prototype.multLeft=function(mat){var m11=(mat.m11*this.m11+mat.m12*this.m21+mat.m13*this.m31+mat.m14*this.m41);var m12=(mat.m11*this.m12+mat.m12*this.m22+mat.m13*this.m32+mat.m14*this.m42);var m13=(mat.m11*this.m13+mat.m12*this.m23+mat.m13*this.m33+mat.m14*this.m43);var m14=(mat.m11*this.m14+mat.m12*this.m24+mat.m13*this.m34+mat.m14*this.m44);var m21=(mat.m21*this.m11+mat.m22*this.m21+mat.m23*this.m31+mat.m24*this.m41);var m22=(mat.m21*this.m12+mat.m22*this.m22+mat.m23*this.m32+mat.m24*this.m42);var m23=(mat.m21*this.m13+mat.m22*this.m23+mat.m23*this.m33+mat.m24*this.m43);var m24=(mat.m21*this.m14+mat.m22*this.m24+mat.m23*this.m34+mat.m24*this.m44);var m31=(mat.m31*this.m11+mat.m32*this.m21+mat.m33*this.m31+mat.m34*this.m41);var m32=(mat.m31*this.m12+mat.m32*this.m22+mat.m33*this.m32+mat.m34*this.m42);var m33=(mat.m31*this.m13+mat.m32*this.m23+mat.m33*this.m33+mat.m34*this.m43);var m34=(mat.m31*this.m14+mat.m32*this.m24+mat.m33*this.m34+mat.m34*this.m44);var m41=(mat.m41*this.m11+mat.m42*this.m21+mat.m43*this.m31+mat.m44*this.m41);var m42=(mat.m41*this.m12+mat.m42*this.m22+mat.m43*this.m32+mat.m44*this.m42);var m43=(mat.m41*this.m13+mat.m42*this.m23+mat.m43*this.m33+mat.m44*this.m43);var m44=(mat.m41*this.m14+mat.m42*this.m24+mat.m43*this.m34+mat.m44*this.m44);this.m11=m11;this.m12=m12;this.m13=m13;this.m14=m14;this.m21=m21;this.m22=m22;this.m23=m23;this.m24=m24;this.m31=m31;this.m32=m32;this.m33=m33;this.m34=m34;this.m41=m41;this.m42=m42;this.m43=m43;this.m44=m44};CanvasMatrix4.prototype.ortho=function(left,right,bottom,top,near,far){var tx=(left+right)/(left-right);var ty=(top+bottom)/(top-bottom);var tz=(far+near)/(far-near);var matrix=new CanvasMatrix4();matrix.m11=2/(left-right);matrix.m12=0;matrix.m13=0;matrix.m14=0;matrix.m21=0;matrix.m22=2/(top-bottom);matrix.m23=0;matrix.m24=0;matrix.m31=0;matrix.m32=0;matrix.m33=-2/(far-near);matrix.m34=0;matrix.m41=tx;matrix.m42=ty;matrix.m43=tz;matrix.m44=1;this.multRight(matrix)};CanvasMatrix4.prototype.frustum=function(left,right,bottom,top,near,far){var matrix=new CanvasMatrix4();var A=(right+left)/(right-left);var B=(top+bottom)/(top-bottom);var C=-(far+near)/(far-near);var D=-(2*far*near)/(far-near);matrix.m11=(2*near)/(right-left);matrix.m12=0;matrix.m13=0;matrix.m14=0;matrix.m21=0;matrix.m22=2*near/(top-bottom);matrix.m23=0;matrix.m24=0;matrix.m31=A;matrix.m32=B;matrix.m33=C;matrix.m34=-1;matrix.m41=0;matrix.m42=0;matrix.m43=D;matrix.m44=0;this.multRight(matrix)};CanvasMatrix4.prototype.perspective=function(fovy,aspect,zNear,zFar){var top=Math.tan(fovy*Math.PI/360)*zNear;var bottom=-top;var left=aspect*bottom;var right=aspect*top;this.frustum(left,right,bottom,top,zNear,zFar)};CanvasMatrix4.prototype.lookat=function(eyex,eyey,eyez,centerx,centery,centerz,upx,upy,upz){var matrix=new CanvasMatrix4();var zx=eyex-centerx;var zy=eyey-centery;var zz=eyez-centerz;var mag=Math.sqrt(zx*zx+zy*zy+zz*zz);if(mag){zx/=mag;zy/=mag;zz/=mag}var yx=upx;var yy=upy;var yz=upz;xx=yy*zz-yz*zy;xy=-yx*zz+yz*zx;xz=yx*zy-yy*zx;yx=zy*xz-zz*xy;yy=-zx*xz+zz*xx;yx=zx*xy-zy*xx;mag=Math.sqrt(xx*xx+xy*xy+xz*xz);if(mag){xx/=mag;xy/=mag;xz/=mag}mag=Math.sqrt(yx*yx+yy*yy+yz*yz);if(mag){yx/=mag;yy/=mag;yz/=mag}matrix.m11=xx;matrix.m12=xy;matrix.m13=xz;matrix.m14=0;matrix.m21=yx;matrix.m22=yy;matrix.m23=yz;matrix.m24=0;matrix.m31=zx;matrix.m32=zy;matrix.m33=zz;matrix.m34=0;matrix.m41=0;matrix.m42=0;matrix.m43=0;matrix.m44=1;matrix.translate(-eyex,-eyey,-eyez);this.multRight(matrix)};CanvasMatrix4.prototype._determinant2x2=function(a,b,c,d){return a*d-b*c};CanvasMatrix4.prototype._determinant3x3=function(a1,a2,a3,b1,b2,b3,c1,c2,c3){return a1*this._determinant2x2(b2,b3,c2,c3)-b1*this._determinant2x2(a2,a3,c2,c3)+c1*this._determinant2x2(a2,a3,b2,b3)};CanvasMatrix4.prototype._determinant4x4=function(){var a1=this.m11;var b1=this.m12;var c1=this.m13;var d1=this.m14;var a2=this.m21;var b2=this.m22;var c2=this.m23;var d2=this.m24;var a3=this.m31;var b3=this.m32;var c3=this.m33;var d3=this.m34;var a4=this.m41;var b4=this.m42;var c4=this.m43;var d4=this.m44;return a1*this._determinant3x3(b2,b3,b4,c2,c3,c4,d2,d3,d4)-b1*this._determinant3x3(a2,a3,a4,c2,c3,c4,d2,d3,d4)+c1*this._determinant3x3(a2,a3,a4,b2,b3,b4,d2,d3,d4)-d1*this._determinant3x3(a2,a3,a4,b2,b3,b4,c2,c3,c4)};CanvasMatrix4.prototype._makeAdjoint=function(){var a1=this.m11;var b1=this.m12;var c1=this.m13;var d1=this.m14;var a2=this.m21;var b2=this.m22;var c2=this.m23;var d2=this.m24;var a3=this.m31;var b3=this.m32;var c3=this.m33;var d3=this.m34;var a4=this.m41;var b4=this.m42;var c4=this.m43;var d4=this.m44;this.m11=this._determinant3x3(b2,b3,b4,c2,c3,c4,d2,d3,d4);this.m21=-this._determinant3x3(a2,a3,a4,c2,c3,c4,d2,d3,d4);this.m31=this._determinant3x3(a2,a3,a4,b2,b3,b4,d2,d3,d4);this.m41=-this._determinant3x3(a2,a3,a4,b2,b3,b4,c2,c3,c4);this.m12=-this._determinant3x3(b1,b3,b4,c1,c3,c4,d1,d3,d4);this.m22=this._determinant3x3(a1,a3,a4,c1,c3,c4,d1,d3,d4);this.m32=-this._determinant3x3(a1,a3,a4,b1,b3,b4,d1,d3,d4);this.m42=this._determinant3x3(a1,a3,a4,b1,b3,b4,c1,c3,c4);this.m13=this._determinant3x3(b1,b2,b4,c1,c2,c4,d1,d2,d4);this.m23=-this._determinant3x3(a1,a2,a4,c1,c2,c4,d1,d2,d4);this.m33=this._determinant3x3(a1,a2,a4,b1,b2,b4,d1,d2,d4);this.m43=-this._determinant3x3(a1,a2,a4,b1,b2,b4,c1,c2,c4);this.m14=-this._determinant3x3(b1,b2,b3,c1,c2,c3,d1,d2,d3);this.m24=this._determinant3x3(a1,a2,a3,c1,c2,c3,d1,d2,d3);this.m34=-this._determinant3x3(a1,a2,a3,b1,b2,b3,d1,d2,d3);this.m44=this._determinant3x3(a1,a2,a3,b1,b2,b3,c1,c2,c3)}
</script>
<div id="description" class="section level3">
<h3>Description</h3>
<p>One of the most appealing features in the analysis of repertory grids is the joint spatial representation of elements and constructs, i. e. row and column points, in a single plot. These plots visualize inter-construct, inter-element and element-construct relations. They can be a helpful tool as they allow insights into the interviewee’s world, support the formulation of clinical hypotheses or and foster the client-therapist interaction.</p>
<p>The first composite plot of repertory grids was introduced by Slater (1964) in his INGRID program. Since its introduction, the INGRID composite plot has become a standard feature of contemporary grid software (e. g. Fransella, Bell &amp; Bannister, 2003).</p>
<p>In contemporary research literature, the joint spatial representation of two different aspects of a data matrix in one composite plot is often treated within the biplot framework (cf. Gower, Lubbe, Gardner, &amp; Roux, 2011; Greenacre, 2010). This framework comprises representations based on different multivariate techniques such as PCA, MDS, CA etc. These techniques differ with regard to several aspects (e.g. pre-treatment of the data, distance model) and yield spatial representations focusing on different aspects of the data. The central idea of a joint spatial representation, i.e. a biplot, is to render a visual representation (usually in two or three dimensions) that optimally displays central features inherent in the data (e.g. correlations between variables, distances between points). As the data represented usually has a dimensionality higher than two or three (i.e. the rank of its data matrix) the problem arises of how to optimally represent the data within a space of lower dimensionality. Hence, the visual representation requires a dimensionality reduction that is usually achieved by a factorization of the data matrix called singular value decomposition (SVD). As the biplot representation is central to grid representation, its rationale will be briefly outlined.</p>
</div>
<div id="biplot-functions" class="section level3">
<h3>Biplot functions</h3>
<p>In <code>OpenRepGrid</code> a number of functions have been implemented to produce different types of biplots. The following are the most important ones:</p>
<ul>
<li><code>biplotSimple</code></li>
<li><code>biplot2d</code></li>
<li><code>biplotPeudo3d</code></li>
<li><code>biplot3d</code></li>
</ul>
<p>All of these functions allow to change a lot of their settings. To see the whole list of available arguments type <code>?</code> followed by the function name.</p>
<div id="biplotsimple" class="section level4">
<h4><code>biplotSimple</code></h4>
<p><code>biplotSimple</code> is a graphically unsophisticated version of a biplot. It will draw elements and constructs vectors using similar arguments as <code>biplot2d</code>. It is a version for quick exploration used during development. The colors of the constructs has been set to <code>darkred</code> to make it easier to differentiate between constructs and element labels.</p>
<pre class="r"><code>biplotSimple(boeker, c.label.col=&quot;darkred&quot;)</code></pre>
<p><img src="visualization_biplot_files/figure-html/biplot-simple.png" title="" alt="" width="672" /></p>
</div>
<div id="biplot2d" class="section level4">
<h4><code>biplot2d</code></h4>
<p>Draws a two-dimensional biplot with a more sophisticated look. Depending on the parameters chosen it contains information on the distances between elements and constructs. Also the relative values the elements have on a construct can be read off by projetion the element onto the construct vector. A lot of parameters can be changed rendering different types of biplots (ESA, Slater’s) and different looks (colors, text size).</p>
<pre class="r"><code>biplot2d(boeker)</code></pre>
<p><img src="visualization_biplot_files/figure-html/biplot2d.png" title="" alt="" width="672" /></p>
</div>
<div id="biplotpseudo3d" class="section level4">
<h4><code>biplotPseudo3d</code></h4>
<p>Draws a biplot of the grid in 2D with depth impression (pseudo 3D). This version is basically a 2D biplot. It only modifies the color and size of the symbols in order to create a 3D impression of the data points. Lighter and smaller labels are more to the back, darker and bigger labels more to the front. This function will call the standard biplot2d function with some modified arguments. For the whole set of arguments that can be used see <code>?biplot2d</code>.</p>
<pre class="r"><code>biplotPseudo3d(boeker)</code></pre>
<p><img src="visualization_biplot_files/figure-html/biploPseudo3d.png" title="" alt="" width="672" /></p>
</div>
<div id="biplot3d" class="section level4">
<h4><code>biplot3d</code></h4>
<p>Renders an interactive 3D biplot. You will only see the interactive 3D plot below if your browser supports WebGL (like e.g. Google Chrome).</p>
<pre class="r"><code>biplot3d(boeker)</code></pre>
<canvas id="biplot3textureCanvas" style="display: none;" width="256" height="256">
Your browser does not support the HTML5 canvas element.
</canvas>
<!-- ****** spheres object 8 ****** -->
<script id="biplot3vshader8" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec3 aNorm;
uniform mat4 normMatrix;
varying vec3 vNormal;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);
}
</script>
<script id="biplot3fshader8" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec3 vNormal;
void main(void) {
vec3 eye = normalize(-vPosition.xyz);
const vec3 emission = vec3(0., 0., 0.);
const vec3 ambient1 = vec3(0., 0., 0.);
const vec3 specular1 = vec3(1., 1., 1.);// light*material
const float shininess1 = 50.;
vec4 colDiff1 = vec4(vCol.rgb * vec3(1., 1., 1.), vCol.a);
const vec3 lightDir1 = vec3(0., 0., 1.);
vec3 halfVec1 = normalize(lightDir1 + eye);
vec4 lighteffect = vec4(emission, 0.);
vec3 n = normalize(vNormal);
n = -faceforward(n, n, eye);
vec3 col1 = ambient1;
float nDotL1 = dot(n, lightDir1);
col1 = col1 + max(nDotL1, 0.) * colDiff1.rgb;
col1 = col1 + pow(max(dot(halfVec1, n), 0.), shininess1) * specular1;
lighteffect = lighteffect + vec4(col1, colDiff1.a);
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 9 ****** -->
<script id="biplot3vshader9" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs, 0.,0.);
}
</script>
<script id="biplot3fshader9" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** lines object 10 ****** -->
<script id="biplot3vshader10" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="biplot3fshader10" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 11 ****** -->
<script id="biplot3vshader11" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs, 0.,0.);
}
</script>
<script id="biplot3fshader11" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** linestrip object 12 ****** -->
<script id="biplot3vshader12" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="biplot3fshader12" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** linestrip object 13 ****** -->
<script id="biplot3vshader13" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="biplot3fshader13" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** linestrip object 14 ****** -->
<script id="biplot3vshader14" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="biplot3fshader14" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<!-- ****** text object 15 ****** -->
<script id="biplot3vshader15" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs, 0.,0.);
}
</script>
<script id="biplot3fshader15" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** text object 16 ****** -->
<script id="biplot3vshader16" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs, 0.,0.);
}
</script>
<script id="biplot3fshader16" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** text object 17 ****** -->
<script id="biplot3vshader17" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
attribute vec2 aOfs;
void main(void) {
vCol = aCol;
vTexcoord = aTexcoord;
vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
pos = pos/pos.w;
gl_Position = pos + vec4(aOfs, 0.,0.);
}
</script>
<script id="biplot3fshader17" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec2 vTexcoord;
uniform sampler2D uSampler;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
if (textureColor.a < 0.1)
discard;
else
gl_FragColor = textureColor;
}
</script>
<!-- ****** spheres object 18 ****** -->
<script id="biplot3vshader18" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec3 aNorm;
uniform mat4 normMatrix;
varying vec3 vNormal;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);
}
</script>
<script id="biplot3fshader18" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec3 vNormal;
void main(void) {
vec3 eye = normalize(-vPosition.xyz);
const vec3 emission = vec3(0., 0., 0.);
const vec3 ambient1 = vec3(0., 0., 0.);
const vec3 specular1 = vec3(1., 1., 1.);// light*material
const float shininess1 = 50.;
vec4 colDiff1 = vec4(vCol.rgb * vec3(1., 1., 1.), vCol.a);
const vec3 lightDir1 = vec3(0., 0., 1.);
vec3 halfVec1 = normalize(lightDir1 + eye);
vec4 lighteffect = vec4(emission, 0.);
vec3 n = normalize(vNormal);
n = -faceforward(n, n, eye);
vec3 col1 = ambient1;
float nDotL1 = dot(n, lightDir1);
col1 = col1 + max(nDotL1, 0.) * colDiff1.rgb;
col1 = col1 + pow(max(dot(halfVec1, n), 0.), shininess1) * specular1;
lighteffect = lighteffect + vec4(col1, colDiff1.a);
gl_FragColor = lighteffect;
}
</script>
<!-- ****** spheres object 19 ****** -->
<script id="biplot3vshader19" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
attribute vec3 aNorm;
uniform mat4 normMatrix;
varying vec3 vNormal;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
vNormal = normalize((normMatrix * vec4(aNorm, 1.)).xyz);
}
</script>
<script id="biplot3fshader19" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
varying vec3 vNormal;
void main(void) {
vec3 eye = normalize(-vPosition.xyz);
const vec3 emission = vec3(0., 0., 0.);
const vec3 ambient1 = vec3(0., 0., 0.);
const vec3 specular1 = vec3(1., 1., 1.);// light*material
const float shininess1 = 50.;
vec4 colDiff1 = vec4(vCol.rgb * vec3(1., 1., 1.), vCol.a);
const vec3 lightDir1 = vec3(0., 0., 1.);
vec3 halfVec1 = normalize(lightDir1 + eye);
vec4 lighteffect = vec4(emission, 0.);
vec3 n = normalize(vNormal);
n = -faceforward(n, n, eye);
vec3 col1 = ambient1;
float nDotL1 = dot(n, lightDir1);
col1 = col1 + max(nDotL1, 0.) * colDiff1.rgb;
col1 = col1 + pow(max(dot(halfVec1, n), 0.), shininess1) * specular1;
lighteffect = lighteffect + vec4(col1, colDiff1.a);
gl_FragColor = lighteffect;
}
</script>
<!-- ****** lines object 20 ****** -->
<script id="biplot3vshader20" type="x-shader/x-vertex">
attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;
void main(void) {
vPosition = mvMatrix * vec4(aPos, 1.);
gl_Position = prMatrix * vPosition;
vCol = aCol;
}
</script>
<script id="biplot3fshader20" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
void main(void) {
vec4 colDiff = vCol;
vec4 lighteffect = colDiff;
gl_FragColor = lighteffect;
}
</script>
<script type="text/javascript"> 
function getShader ( gl, id ){
var shaderScript = document.getElementById ( id );
var str = "";
var k = shaderScript.firstChild;
while ( k ){
if ( k.nodeType == 3 ) str += k.textContent;
k = k.nextSibling;
}
var shader;
if ( shaderScript.type == "x-shader/x-fragment" )
shader = gl.createShader ( gl.FRAGMENT_SHADER );
else if ( shaderScript.type == "x-shader/x-vertex" )
shader = gl.createShader(gl.VERTEX_SHADER);
else return null;
gl.shaderSource(shader, str);
gl.compileShader(shader);
if (gl.getShaderParameter(shader, gl.COMPILE_STATUS) == 0)
alert(gl.getShaderInfoLog(shader));
return shader;
}
var min = Math.min;
var max = Math.max;
var sqrt = Math.sqrt;
var sin = Math.sin;
var acos = Math.acos;
var tan = Math.tan;
var SQRT2 = Math.SQRT2;
var PI = Math.PI;
var log = Math.log;
var exp = Math.exp;
function biplot3webGLStart() {
var debug = function(msg) {
document.getElementById("biplot3debug").innerHTML = msg;
}
debug("");
var canvas = document.getElementById("biplot3canvas");
if (!window.WebGLRenderingContext){
debug(" Your browser does not support WebGL. See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
var gl;
try {
// Try to grab the standard context. If it fails, fallback to experimental.
gl = canvas.getContext("webgl") 
|| canvas.getContext("experimental-webgl");
}
catch(e) {}
if ( !gl ) {
debug(" Your browser appears to support WebGL, but did not create a WebGL context.  See <a href=\"http://get.webgl.org\">http://get.webgl.org</a>");
return;
}
var width = 577;  var height = 577;
canvas.width = width;   canvas.height = height;
gl.viewport(0, 0, width, height);
var prMatrix = new CanvasMatrix4();
var mvMatrix = new CanvasMatrix4();
var normMatrix = new CanvasMatrix4();
var saveMat = new CanvasMatrix4();
saveMat.makeIdentity();
var distance;
var posLoc = 0;
var colLoc = 1;
var zoom = 0.75;
var fov = 60;
var userMatrix = new CanvasMatrix4();
userMatrix.load([
1, 0, 0, 0,
0, 1, 0, 0,
0, 0, 1, 0,
0, 0, 0, 1
]);
function getPowerOfTwo(value) {
var pow = 1;
while(pow<value) {
pow *= 2;
}
return pow;
}
function handleLoadedTexture(texture, textureCanvas) {
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
gl.bindTexture(gl.TEXTURE_2D, texture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D, null);
}
function loadImageToTexture(filename, texture) {   
var canvas = document.getElementById("biplot3textureCanvas");
var ctx = canvas.getContext("2d");
var image = new Image();
image.onload = function() {
var w = image.width;
var h = image.height;
var canvasX = getPowerOfTwo(w);
var canvasY = getPowerOfTwo(h);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.imageSmoothingEnabled = true;
ctx.drawImage(image, 0, 0, canvasX, canvasY);
handleLoadedTexture(texture, canvas);
drawScene();
}
image.src = filename;
}      
function drawTextToCanvas(text, cex) {
var canvasX, canvasY;
var textX, textY;
var textHeight = 20 * cex;
var textColour = "white";
var fontFamily = "Arial";
var backgroundColour = "rgba(0,0,0,0)";
var canvas = document.getElementById("biplot3textureCanvas");
var ctx = canvas.getContext("2d");
ctx.font = textHeight+"px "+fontFamily;
canvasX = 1;
var widths = [];
for (var i = 0; i < text.length; i++)  {
widths[i] = ctx.measureText(text[i]).width;
canvasX = (widths[i] > canvasX) ? widths[i] : canvasX;
}     
canvasX = getPowerOfTwo(canvasX);
var offset = 2*textHeight; // offset to first baseline
var skip = 2*textHeight;   // skip between baselines      
canvasY = getPowerOfTwo(offset + text.length*skip);
canvas.width = canvasX;
canvas.height = canvasY;
ctx.fillStyle = backgroundColour;
ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
ctx.fillStyle = textColour;
ctx.textAlign = "left";
ctx.textBaseline = "alphabetic";
ctx.font = textHeight+"px "+fontFamily;
for(var i = 0; i < text.length; i++) {
textY = i*skip + offset;
ctx.fillText(text[i], 0,  textY);
}
return {canvasX:canvasX, canvasY:canvasY,
widths:widths, textHeight:textHeight,
offset:offset, skip:skip};
}
// ****** sphere object ******
var v=new Float32Array([
-1, 0, 0,
1, 0, 0,
0, -1, 0,
0, 1, 0,
0, 0, -1,
0, 0, 1,
-0.7071068, 0, -0.7071068,
-0.7071068, -0.7071068, 0,
0, -0.7071068, -0.7071068,
-0.7071068, 0, 0.7071068,
0, -0.7071068, 0.7071068,
-0.7071068, 0.7071068, 0,
0, 0.7071068, -0.7071068,
0, 0.7071068, 0.7071068,
0.7071068, -0.7071068, 0,
0.7071068, 0, -0.7071068,
0.7071068, 0, 0.7071068,
0.7071068, 0.7071068, 0,
-0.9349975, 0, -0.3546542,
-0.9349975, -0.3546542, 0,
-0.77044, -0.4507894, -0.4507894,
0, -0.3546542, -0.9349975,
-0.3546542, 0, -0.9349975,
-0.4507894, -0.4507894, -0.77044,
-0.3546542, -0.9349975, 0,
0, -0.9349975, -0.3546542,
-0.4507894, -0.77044, -0.4507894,
-0.9349975, 0, 0.3546542,
-0.77044, -0.4507894, 0.4507894,
0, -0.9349975, 0.3546542,
-0.4507894, -0.77044, 0.4507894,
-0.3546542, 0, 0.9349975,
0, -0.3546542, 0.9349975,
-0.4507894, -0.4507894, 0.77044,
-0.9349975, 0.3546542, 0,
-0.77044, 0.4507894, -0.4507894,
0, 0.9349975, -0.3546542,
-0.3546542, 0.9349975, 0,
-0.4507894, 0.77044, -0.4507894,
0, 0.3546542, -0.9349975,
-0.4507894, 0.4507894, -0.77044,
-0.77044, 0.4507894, 0.4507894,
0, 0.3546542, 0.9349975,
-0.4507894, 0.4507894, 0.77044,
0, 0.9349975, 0.3546542,
-0.4507894, 0.77044, 0.4507894,
0.9349975, -0.3546542, 0,
0.9349975, 0, -0.3546542,
0.77044, -0.4507894, -0.4507894,
0.3546542, -0.9349975, 0,
0.4507894, -0.77044, -0.4507894,
0.3546542, 0, -0.9349975,
0.4507894, -0.4507894, -0.77044,
0.9349975, 0, 0.3546542,
0.77044, -0.4507894, 0.4507894,
0.3546542, 0, 0.9349975,
0.4507894, -0.4507894, 0.77044,
0.4507894, -0.77044, 0.4507894,
0.9349975, 0.3546542, 0,
0.77044, 0.4507894, -0.4507894,
0.4507894, 0.4507894, -0.77044,
0.3546542, 0.9349975, 0,
0.4507894, 0.77044, -0.4507894,
0.77044, 0.4507894, 0.4507894,
0.4507894, 0.77044, 0.4507894,
0.4507894, 0.4507894, 0.77044
]);
var f=new Uint16Array([
0, 18, 19,
6, 20, 18,
7, 19, 20,
19, 18, 20,
4, 21, 22,
8, 23, 21,
6, 22, 23,
22, 21, 23,
2, 24, 25,
7, 26, 24,
8, 25, 26,
25, 24, 26,
7, 20, 26,
6, 23, 20,
8, 26, 23,
26, 20, 23,
0, 19, 27,
7, 28, 19,
9, 27, 28,
27, 19, 28,
2, 29, 24,
10, 30, 29,
7, 24, 30,
24, 29, 30,
5, 31, 32,
9, 33, 31,
10, 32, 33,
32, 31, 33,
9, 28, 33,
7, 30, 28,
10, 33, 30,
33, 28, 30,
0, 34, 18,
11, 35, 34,
6, 18, 35,
18, 34, 35,
3, 36, 37,
12, 38, 36,
11, 37, 38,
37, 36, 38,
4, 22, 39,
6, 40, 22,
12, 39, 40,
39, 22, 40,
6, 35, 40,
11, 38, 35,
12, 40, 38,
40, 35, 38,
0, 27, 34,
9, 41, 27,
11, 34, 41,
34, 27, 41,
5, 42, 31,
13, 43, 42,
9, 31, 43,
31, 42, 43,
3, 37, 44,
11, 45, 37,
13, 44, 45,
44, 37, 45,
11, 41, 45,
9, 43, 41,
13, 45, 43,
45, 41, 43,
1, 46, 47,
14, 48, 46,
15, 47, 48,
47, 46, 48,
2, 25, 49,
8, 50, 25,
14, 49, 50,
49, 25, 50,
4, 51, 21,
15, 52, 51,
8, 21, 52,
21, 51, 52,
15, 48, 52,
14, 50, 48,
8, 52, 50,
52, 48, 50,
1, 53, 46,
16, 54, 53,
14, 46, 54,
46, 53, 54,
5, 32, 55,
10, 56, 32,
16, 55, 56,
55, 32, 56,
2, 49, 29,
14, 57, 49,
10, 29, 57,
29, 49, 57,
14, 54, 57,
16, 56, 54,
10, 57, 56,
57, 54, 56,
1, 47, 58,
15, 59, 47,
17, 58, 59,
58, 47, 59,
4, 39, 51,
12, 60, 39,
15, 51, 60,
51, 39, 60,
3, 61, 36,
17, 62, 61,
12, 36, 62,
36, 61, 62,
17, 59, 62,
15, 60, 59,
12, 62, 60,
62, 59, 60,
1, 58, 53,
17, 63, 58,
16, 53, 63,
53, 58, 63,
3, 44, 61,
13, 64, 44,
17, 61, 64,
61, 44, 64,
5, 55, 42,
16, 65, 55,
13, 42, 65,
42, 55, 65,
16, 63, 65,
17, 64, 63,
13, 65, 64,
65, 63, 64
]);
var sphereBuf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var sphereIbuf = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
// ****** spheres object 8 ******
var prog8  = gl.createProgram();
gl.attachShader(prog8, getShader( gl, "biplot3vshader8" ));
gl.attachShader(prog8, getShader( gl, "biplot3fshader8" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog8, 0, "aPos");
gl.bindAttribLocation(prog8, 1, "aCol");
gl.linkProgram(prog8);
var v=new Float32Array([
-3.01998, 0.2990217, 0.1367679, 0.156318,
-1.931967, -5.46472, -1.092596, 0.156318,
0.06196691, 0.1435347, 1.022866, 0.156318,
-1.520572, -2.968761, 1.49862, 0.156318,
0.8220779, -0.7590234, 1.261936, 0.156318,
4.07337, 2.086559, -0.9577541, 0.156318,
0.3288696, -0.3517465, 3.427192, 0.156318,
2.003463, -1.408959, -3.443698, 0.156318,
2.671087, -0.7958061, 0.6117787, 0.156318,
-1.76356, -0.6200543, -2.036622, 0.156318,
7.815898, 0.4884962, 0.2927126, 0.156318,
-2.386414, 1.871343, 1.129171, 0.156318,
-3.272479, 2.258145, -0.6681634, 0.156318,
-1.851986, 3.11873, -1.414499, 0.156318,
-2.029774, 2.103241, 0.2322887, 0.156318
]);
var values8 = v;
var normLoc8 = gl.getAttribLocation(prog8, "aNorm");
var mvMatLoc8 = gl.getUniformLocation(prog8,"mvMatrix");
var prMatLoc8 = gl.getUniformLocation(prog8,"prMatrix");
var normMatLoc8 = gl.getUniformLocation(prog8,"normMatrix");
// ****** text object 9 ******
var prog9  = gl.createProgram();
gl.attachShader(prog9, getShader( gl, "biplot3vshader9" ));
gl.attachShader(prog9, getShader( gl, "biplot3fshader9" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog9, 0, "aPos");
gl.bindAttribLocation(prog9, 1, "aCol");
gl.linkProgram(prog9);
var texts = [
"self",
"ideal self",
"mother",
"father",
"kurt",
"karl",
"george",
"martin",
"elizabeth",
"therapist",
"irene",
"childhood self",
"self before illness",
"self with delusion",
"self as dreamer"
];
var texinfo = drawTextToCanvas(texts, 0.6);  
var canvasX9 = texinfo.canvasX;
var canvasY9 = texinfo.canvasY;
var ofsLoc9 = gl.getAttribLocation(prog9, "aOfs");
var texture9 = gl.createTexture();
var texLoc9 = gl.getAttribLocation(prog9, "aTexcoord");
var sampler9 = gl.getUniformLocation(prog9,"uSampler");
handleLoadedTexture(texture9, document.getElementById("biplot3textureCanvas"));
var v=new Float32Array([
-3.09814, 0.2208627, 0.05860887, 0, -0.5, 1, 1,
-3.09814, 0.2208627, 0.05860887, 1, -0.5, 1, 1,
-3.09814, 0.2208627, 0.05860887, 1, 1.5, 1, 1,
-3.09814, 0.2208627, 0.05860887, 0, 1.5, 1, 1,
-2.010126, -5.542879, -1.170755, 0, -0.5, 1, 1,
-2.010126, -5.542879, -1.170755, 1, -0.5, 1, 1,
-2.010126, -5.542879, -1.170755, 1, 1.5, 1, 1,
-2.010126, -5.542879, -1.170755, 0, 1.5, 1, 1,
-0.01619207, 0.06537569, 0.9447067, 0, -0.5, 1, 1,
-0.01619207, 0.06537569, 0.9447067, 1, -0.5, 1, 1,
-0.01619207, 0.06537569, 0.9447067, 1, 1.5, 1, 1,
-0.01619207, 0.06537569, 0.9447067, 0, 1.5, 1, 1,
-1.598731, -3.04692, 1.420461, 0, -0.5, 1, 1,
-1.598731, -3.04692, 1.420461, 1, -0.5, 1, 1,
-1.598731, -3.04692, 1.420461, 1, 1.5, 1, 1,
-1.598731, -3.04692, 1.420461, 0, 1.5, 1, 1,
0.7439189, -0.8371824, 1.183777, 0, -0.5, 1, 1,
0.7439189, -0.8371824, 1.183777, 1, -0.5, 1, 1,
0.7439189, -0.8371824, 1.183777, 1, 1.5, 1, 1,
0.7439189, -0.8371824, 1.183777, 0, 1.5, 1, 1,
3.995212, 2.008399, -1.035913, 0, -0.5, 1, 1,
3.995212, 2.008399, -1.035913, 1, -0.5, 1, 1,
3.995212, 2.008399, -1.035913, 1, 1.5, 1, 1,
3.995212, 2.008399, -1.035913, 0, 1.5, 1, 1,
0.2507106, -0.4299055, 3.349033, 0, -0.5, 1, 1,
0.2507106, -0.4299055, 3.349033, 1, -0.5, 1, 1,
0.2507106, -0.4299055, 3.349033, 1, 1.5, 1, 1,
0.2507106, -0.4299055, 3.349033, 0, 1.5, 1, 1,
1.925303, -1.487118, -3.521857, 0, -0.5, 1, 1,
1.925303, -1.487118, -3.521857, 1, -0.5, 1, 1,
1.925303, -1.487118, -3.521857, 1, 1.5, 1, 1,
1.925303, -1.487118, -3.521857, 0, 1.5, 1, 1,
2.592928, -0.873965, 0.5336197, 0, -0.5, 1, 1,
2.592928, -0.873965, 0.5336197, 1, -0.5, 1, 1,
2.592928, -0.873965, 0.5336197, 1, 1.5, 1, 1,
2.592928, -0.873965, 0.5336197, 0, 1.5, 1, 1,
-1.841719, -0.6982133, -2.114781, 0, -0.5, 1, 1,
-1.841719, -0.6982133, -2.114781, 1, -0.5, 1, 1,
-1.841719, -0.6982133, -2.114781, 1, 1.5, 1, 1,
-1.841719, -0.6982133, -2.114781, 0, 1.5, 1, 1,
7.737739, 0.4103372, 0.2145536, 0, -0.5, 1, 1,
7.737739, 0.4103372, 0.2145536, 1, -0.5, 1, 1,
7.737739, 0.4103372, 0.2145536, 1, 1.5, 1, 1,
7.737739, 0.4103372, 0.2145536, 0, 1.5, 1, 1,
-2.464573, 1.793184, 1.051012, 0, -0.5, 1, 1,
-2.464573, 1.793184, 1.051012, 1, -0.5, 1, 1,
-2.464573, 1.793184, 1.051012, 1, 1.5, 1, 1,
-2.464573, 1.793184, 1.051012, 0, 1.5, 1, 1,
-3.350638, 2.179986, -0.7463224, 0, -0.5, 1, 1,
-3.350638, 2.179986, -0.7463224, 1, -0.5, 1, 1,
-3.350638, 2.179986, -0.7463224, 1, 1.5, 1, 1,
-3.350638, 2.179986, -0.7463224, 0, 1.5, 1, 1,
-1.930145, 3.040571, -1.492658, 0, -0.5, 1, 1,
-1.930145, 3.040571, -1.492658, 1, -0.5, 1, 1,
-1.930145, 3.040571, -1.492658, 1, 1.5, 1, 1,
-1.930145, 3.040571, -1.492658, 0, 1.5, 1, 1,
-2.107933, 2.025082, 0.1541298, 0, -0.5, 1, 1,
-2.107933, 2.025082, 0.1541298, 1, -0.5, 1, 1,
-2.107933, 2.025082, 0.1541298, 1, 1.5, 1, 1,
-2.107933, 2.025082, 0.1541298, 0, 1.5, 1, 1
]);
for (var i=0; i<15; i++) 
for (var j=0; j<4; j++) {
ind = 7*(4*i + j) + 3;
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i]/width;
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight/height;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23,
24, 25, 26, 24, 26, 27,
28, 29, 30, 28, 30, 31,
32, 33, 34, 32, 34, 35,
36, 37, 38, 36, 38, 39,
40, 41, 42, 40, 42, 43,
44, 45, 46, 44, 46, 47,
48, 49, 50, 48, 50, 51,
52, 53, 54, 52, 54, 55,
56, 57, 58, 56, 58, 59
]);
var buf9 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf9);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var ibuf9 = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf9);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
var mvMatLoc9 = gl.getUniformLocation(prog9,"mvMatrix");
var prMatLoc9 = gl.getUniformLocation(prog9,"prMatrix");
// ****** lines object 10 ******
var prog10  = gl.createProgram();
gl.attachShader(prog10, getShader( gl, "biplot3vshader10" ));
gl.attachShader(prog10, getShader( gl, "biplot3fshader10" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog10, 0, "aPos");
gl.bindAttribLocation(prog10, 1, "aCol");
gl.linkProgram(prog10);
var v=new Float32Array([
0.386304, -0.06258269, -0.3346449,
7.622866, -1.234933, -6.603486,
0.1037138, -0.4167697, 0.1894142,
2.245022, -9.021533, 4.100121,
-0.04420828, 0.2150645, -0.1012773,
-1.857723, 9.037451, -4.255881,
0.02152008, 0.4199164, -0.176454,
0.4795222, 9.356807, -3.931844,
0.33711, 0.2325553, 0.2125145,
7.423672, 5.12122, 4.67989,
0.2257524, -0.2631578, -0.101119,
6.351075, -7.403396, -2.844774,
-0.0309904, 0.219315, 0.07919913,
-1.338632, 9.473326, 3.421011,
0.08821715, -0.1499639, -0.1224664,
4.212817, -7.161538, -5.848394,
0.2950906, 0.3088075, 0.3365267,
5.513898, 5.770205, 6.28815,
-0.4003765, -0.01001787, 0.3740094,
-7.423765, -0.185751, 6.934867,
-0.03401585, 0.3229545, 0.1116129,
-1.006516, 9.5561, 3.302583,
0.3268435, 0.187082, 0.4772242,
5.462786, 3.126845, 7.976213,
0.1605406, -0.4132351, 0.4524682,
2.575088, -6.628334, 7.257636,
0.5320792, -0.01888357, -0.1897967,
9.564703, -0.3394527, -3.411803,
-0.386304, 0.06258269, 0.3346449,
-7.622866, 1.234933, 6.603486,
-0.1037138, 0.4167697, -0.1894142,
-2.245022, 9.021533, -4.100121,
0.04420828, -0.2150645, 0.1012773,
1.857723, -9.037451, 4.255881,
-0.02152008, -0.4199164, 0.176454,
-0.4795222, -9.356807, 3.931844,
-0.33711, -0.2325553, -0.2125145,
-7.423672, -5.12122, -4.67989,
-0.2257524, 0.2631578, 0.101119,
-6.351075, 7.403396, 2.844774,
0.0309904, -0.219315, -0.07919913,
1.338632, -9.473326, -3.421011,
-0.08821715, 0.1499639, 0.1224664,
-4.212817, 7.161538, 5.848394,
-0.2950906, -0.3088075, -0.3365267,
-5.513898, -5.770205, -6.28815,
0.4003765, 0.01001787, -0.3740094,
7.423765, 0.185751, -6.934867,
0.03401585, -0.3229545, -0.1116129,
1.006516, -9.5561, -3.302583,
-0.3268435, -0.187082, -0.4772242,
-5.462786, -3.126845, -7.976213,
-0.1605406, 0.4132351, -0.4524682,
-2.575088, 6.628334, -7.257636,
-0.5320792, 0.01888357, 0.1897967,
-9.564703, 0.3394527, 3.411803
]);
var buf10 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf10);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var mvMatLoc10 = gl.getUniformLocation(prog10,"mvMatrix");
var prMatLoc10 = gl.getUniformLocation(prog10,"prMatrix");
// ****** text object 11 ******
var prog11  = gl.createProgram();
gl.attachShader(prog11, getShader( gl, "biplot3vshader11" ));
gl.attachShader(prog11, getShader( gl, "biplot3fshader11" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog11, 0, "aPos");
gl.bindAttribLocation(prog11, 1, "aCol");
gl.linkProgram(prog11);
var texts = [
"get along with conflicts",
"sociable",
"excluded",
"passive",
"indifferent",
"dispassionate",
"depressed",
"serious",
"selfish",
"peaceful",
"technical",
"emotional",
"extrovert",
"home oriented",
"balanced",
"isolated",
"closely integrated",
"discursive",
"open minded",
"dreamy",
"practically oriented",
"playful",
"socially minded",
"quarrelsome",
"artistic",
"scientific",
"introvert",
"wanderlust"
];
var texinfo = drawTextToCanvas(texts, 0.6);  
var canvasX11 = texinfo.canvasX;
var canvasY11 = texinfo.canvasY;
var ofsLoc11 = gl.getAttribLocation(prog11, "aOfs");
var texture11 = gl.createTexture();
var texLoc11 = gl.getAttribLocation(prog11, "aTexcoord");
var sampler11 = gl.getUniformLocation(prog11,"uSampler");
handleLoadedTexture(texture11, document.getElementById("biplot3textureCanvas"));
var v=new Float32Array([
7.622866, -1.234933, -6.603486, 0, -0.5, 0.5, 0.5,
7.622866, -1.234933, -6.603486, 1, -0.5, 0.5, 0.5,
7.622866, -1.234933, -6.603486, 1, 1.5, 0.5, 0.5,
7.622866, -1.234933, -6.603486, 0, 1.5, 0.5, 0.5,
2.245022, -9.021533, 4.100121, 0, -0.5, 0.5, 0.5,
2.245022, -9.021533, 4.100121, 1, -0.5, 0.5, 0.5,
2.245022, -9.021533, 4.100121, 1, 1.5, 0.5, 0.5,
2.245022, -9.021533, 4.100121, 0, 1.5, 0.5, 0.5,
-1.857723, 9.037451, -4.255881, 0, -0.5, 0.5, 0.5,
-1.857723, 9.037451, -4.255881, 1, -0.5, 0.5, 0.5,
-1.857723, 9.037451, -4.255881, 1, 1.5, 0.5, 0.5,
-1.857723, 9.037451, -4.255881, 0, 1.5, 0.5, 0.5,
0.4795222, 9.356807, -3.931844, 0, -0.5, 0.5, 0.5,
0.4795222, 9.356807, -3.931844, 1, -0.5, 0.5, 0.5,
0.4795222, 9.356807, -3.931844, 1, 1.5, 0.5, 0.5,
0.4795222, 9.356807, -3.931844, 0, 1.5, 0.5, 0.5,
7.423672, 5.12122, 4.67989, 0, -0.5, 0.5, 0.5,
7.423672, 5.12122, 4.67989, 1, -0.5, 0.5, 0.5,
7.423672, 5.12122, 4.67989, 1, 1.5, 0.5, 0.5,
7.423672, 5.12122, 4.67989, 0, 1.5, 0.5, 0.5,
6.351075, -7.403396, -2.844774, 0, -0.5, 0.5, 0.5,
6.351075, -7.403396, -2.844774, 1, -0.5, 0.5, 0.5,
6.351075, -7.403396, -2.844774, 1, 1.5, 0.5, 0.5,
6.351075, -7.403396, -2.844774, 0, 1.5, 0.5, 0.5,
-1.338632, 9.473326, 3.421011, 0, -0.5, 0.5, 0.5,
-1.338632, 9.473326, 3.421011, 1, -0.5, 0.5, 0.5,
-1.338632, 9.473326, 3.421011, 1, 1.5, 0.5, 0.5,
-1.338632, 9.473326, 3.421011, 0, 1.5, 0.5, 0.5,
4.212817, -7.161538, -5.848394, 0, -0.5, 0.5, 0.5,
4.212817, -7.161538, -5.848394, 1, -0.5, 0.5, 0.5,
4.212817, -7.161538, -5.848394, 1, 1.5, 0.5, 0.5,
4.212817, -7.161538, -5.848394, 0, 1.5, 0.5, 0.5,
5.513898, 5.770205, 6.28815, 0, -0.5, 0.5, 0.5,
5.513898, 5.770205, 6.28815, 1, -0.5, 0.5, 0.5,
5.513898, 5.770205, 6.28815, 1, 1.5, 0.5, 0.5,
5.513898, 5.770205, 6.28815, 0, 1.5, 0.5, 0.5,
-7.423765, -0.185751, 6.934867, 0, -0.5, 0.5, 0.5,
-7.423765, -0.185751, 6.934867, 1, -0.5, 0.5, 0.5,
-7.423765, -0.185751, 6.934867, 1, 1.5, 0.5, 0.5,
-7.423765, -0.185751, 6.934867, 0, 1.5, 0.5, 0.5,
-1.006516, 9.5561, 3.302583, 0, -0.5, 0.5, 0.5,
-1.006516, 9.5561, 3.302583, 1, -0.5, 0.5, 0.5,
-1.006516, 9.5561, 3.302583, 1, 1.5, 0.5, 0.5,
-1.006516, 9.5561, 3.302583, 0, 1.5, 0.5, 0.5,
5.462786, 3.126845, 7.976213, 0, -0.5, 0.5, 0.5,
5.462786, 3.126845, 7.976213, 1, -0.5, 0.5, 0.5,
5.462786, 3.126845, 7.976213, 1, 1.5, 0.5, 0.5,
5.462786, 3.126845, 7.976213, 0, 1.5, 0.5, 0.5,
2.575088, -6.628334, 7.257636, 0, -0.5, 0.5, 0.5,
2.575088, -6.628334, 7.257636, 1, -0.5, 0.5, 0.5,
2.575088, -6.628334, 7.257636, 1, 1.5, 0.5, 0.5,
2.575088, -6.628334, 7.257636, 0, 1.5, 0.5, 0.5,
9.564703, -0.3394527, -3.411803, 0, -0.5, 0.5, 0.5,
9.564703, -0.3394527, -3.411803, 1, -0.5, 0.5, 0.5,
9.564703, -0.3394527, -3.411803, 1, 1.5, 0.5, 0.5,
9.564703, -0.3394527, -3.411803, 0, 1.5, 0.5, 0.5,
-7.622866, 1.234933, 6.603486, 0, -0.5, 0.5, 0.5,
-7.622866, 1.234933, 6.603486, 1, -0.5, 0.5, 0.5,
-7.622866, 1.234933, 6.603486, 1, 1.5, 0.5, 0.5,
-7.622866, 1.234933, 6.603486, 0, 1.5, 0.5, 0.5,
-2.245022, 9.021533, -4.100121, 0, -0.5, 0.5, 0.5,
-2.245022, 9.021533, -4.100121, 1, -0.5, 0.5, 0.5,
-2.245022, 9.021533, -4.100121, 1, 1.5, 0.5, 0.5,
-2.245022, 9.021533, -4.100121, 0, 1.5, 0.5, 0.5,
1.857723, -9.037451, 4.255881, 0, -0.5, 0.5, 0.5,
1.857723, -9.037451, 4.255881, 1, -0.5, 0.5, 0.5,
1.857723, -9.037451, 4.255881, 1, 1.5, 0.5, 0.5,
1.857723, -9.037451, 4.255881, 0, 1.5, 0.5, 0.5,
-0.4795222, -9.356807, 3.931844, 0, -0.5, 0.5, 0.5,
-0.4795222, -9.356807, 3.931844, 1, -0.5, 0.5, 0.5,
-0.4795222, -9.356807, 3.931844, 1, 1.5, 0.5, 0.5,
-0.4795222, -9.356807, 3.931844, 0, 1.5, 0.5, 0.5,
-7.423672, -5.12122, -4.67989, 0, -0.5, 0.5, 0.5,
-7.423672, -5.12122, -4.67989, 1, -0.5, 0.5, 0.5,
-7.423672, -5.12122, -4.67989, 1, 1.5, 0.5, 0.5,
-7.423672, -5.12122, -4.67989, 0, 1.5, 0.5, 0.5,
-6.351075, 7.403396, 2.844774, 0, -0.5, 0.5, 0.5,
-6.351075, 7.403396, 2.844774, 1, -0.5, 0.5, 0.5,
-6.351075, 7.403396, 2.844774, 1, 1.5, 0.5, 0.5,
-6.351075, 7.403396, 2.844774, 0, 1.5, 0.5, 0.5,
1.338632, -9.473326, -3.421011, 0, -0.5, 0.5, 0.5,
1.338632, -9.473326, -3.421011, 1, -0.5, 0.5, 0.5,
1.338632, -9.473326, -3.421011, 1, 1.5, 0.5, 0.5,
1.338632, -9.473326, -3.421011, 0, 1.5, 0.5, 0.5,
-4.212817, 7.161538, 5.848394, 0, -0.5, 0.5, 0.5,
-4.212817, 7.161538, 5.848394, 1, -0.5, 0.5, 0.5,
-4.212817, 7.161538, 5.848394, 1, 1.5, 0.5, 0.5,
-4.212817, 7.161538, 5.848394, 0, 1.5, 0.5, 0.5,
-5.513898, -5.770205, -6.28815, 0, -0.5, 0.5, 0.5,
-5.513898, -5.770205, -6.28815, 1, -0.5, 0.5, 0.5,
-5.513898, -5.770205, -6.28815, 1, 1.5, 0.5, 0.5,
-5.513898, -5.770205, -6.28815, 0, 1.5, 0.5, 0.5,
7.423765, 0.185751, -6.934867, 0, -0.5, 0.5, 0.5,
7.423765, 0.185751, -6.934867, 1, -0.5, 0.5, 0.5,
7.423765, 0.185751, -6.934867, 1, 1.5, 0.5, 0.5,
7.423765, 0.185751, -6.934867, 0, 1.5, 0.5, 0.5,
1.006516, -9.5561, -3.302583, 0, -0.5, 0.5, 0.5,
1.006516, -9.5561, -3.302583, 1, -0.5, 0.5, 0.5,
1.006516, -9.5561, -3.302583, 1, 1.5, 0.5, 0.5,
1.006516, -9.5561, -3.302583, 0, 1.5, 0.5, 0.5,
-5.462786, -3.126845, -7.976213, 0, -0.5, 0.5, 0.5,
-5.462786, -3.126845, -7.976213, 1, -0.5, 0.5, 0.5,
-5.462786, -3.126845, -7.976213, 1, 1.5, 0.5, 0.5,
-5.462786, -3.126845, -7.976213, 0, 1.5, 0.5, 0.5,
-2.575088, 6.628334, -7.257636, 0, -0.5, 0.5, 0.5,
-2.575088, 6.628334, -7.257636, 1, -0.5, 0.5, 0.5,
-2.575088, 6.628334, -7.257636, 1, 1.5, 0.5, 0.5,
-2.575088, 6.628334, -7.257636, 0, 1.5, 0.5, 0.5,
-9.564703, 0.3394527, 3.411803, 0, -0.5, 0.5, 0.5,
-9.564703, 0.3394527, 3.411803, 1, -0.5, 0.5, 0.5,
-9.564703, 0.3394527, 3.411803, 1, 1.5, 0.5, 0.5,
-9.564703, 0.3394527, 3.411803, 0, 1.5, 0.5, 0.5
]);
for (var i=0; i<28; i++) 
for (var j=0; j<4; j++) {
ind = 7*(4*i + j) + 3;
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i]/width;
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight/height;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
var f=new Uint16Array([
0, 1, 2, 0, 2, 3,
4, 5, 6, 4, 6, 7,
8, 9, 10, 8, 10, 11,
12, 13, 14, 12, 14, 15,
16, 17, 18, 16, 18, 19,
20, 21, 22, 20, 22, 23,
24, 25, 26, 24, 26, 27,
28, 29, 30, 28, 30, 31,
32, 33, 34, 32, 34, 35,
36, 37, 38, 36, 38, 39,
40, 41, 42, 40, 42, 43,
44, 45, 46, 44, 46, 47,
48, 49, 50, 48, 50, 51,
52, 53, 54, 52, 54, 55,
56, 57, 58, 56, 58, 59,
60, 61, 62, 60, 62, 63,
64, 65, 66, 64, 66, 67,
68, 69, 70, 68, 70, 71,
72, 73, 74, 72, 74, 75,
76, 77, 78, 76, 78, 79,
80, 81, 82, 80, 82, 83,
84, 85, 86, 84, 86, 87,
88, 89, 90, 88, 90, 91,
92, 93, 94, 92, 94, 95,
96, 97, 98, 96, 98, 99,
100, 101, 102, 100, 102, 103,
104, 105, 106, 104, 106, 107,
108, 109, 110, 108, 110, 111
]);
var buf11 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf11);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var ibuf11 = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf11);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
var mvMatLoc11 = gl.getUniformLocation(prog11,"mvMatrix");
var prMatLoc11 = gl.getUniformLocation(prog11,"prMatrix");
// ****** linestrip object 12 ******
var prog12  = gl.createProgram();
gl.attachShader(prog12, getShader( gl, "biplot3vshader12" ));
gl.attachShader(prog12, getShader( gl, "biplot3fshader12" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog12, 0, "aPos");
gl.bindAttribLocation(prog12, 1, "aCol");
gl.linkProgram(prog12);
var v=new Float32Array([
0, 0, 0,
10.16067, 0, 0
]);
var buf12 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf12);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var mvMatLoc12 = gl.getUniformLocation(prog12,"mvMatrix");
var prMatLoc12 = gl.getUniformLocation(prog12,"prMatrix");
// ****** linestrip object 13 ******
var prog13  = gl.createProgram();
gl.attachShader(prog13, getShader( gl, "biplot3vshader13" ));
gl.attachShader(prog13, getShader( gl, "biplot3fshader13" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog13, 0, "aPos");
gl.bindAttribLocation(prog13, 1, "aCol");
gl.linkProgram(prog13);
var v=new Float32Array([
0, 0, 0,
0, 10.16067, 0
]);
var buf13 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf13);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var mvMatLoc13 = gl.getUniformLocation(prog13,"mvMatrix");
var prMatLoc13 = gl.getUniformLocation(prog13,"prMatrix");
// ****** linestrip object 14 ******
var prog14  = gl.createProgram();
gl.attachShader(prog14, getShader( gl, "biplot3vshader14" ));
gl.attachShader(prog14, getShader( gl, "biplot3fshader14" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog14, 0, "aPos");
gl.bindAttribLocation(prog14, 1, "aCol");
gl.linkProgram(prog14);
var v=new Float32Array([
0, 0, 0,
0, 0, 10.16067
]);
var buf14 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf14);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var mvMatLoc14 = gl.getUniformLocation(prog14,"mvMatrix");
var prMatLoc14 = gl.getUniformLocation(prog14,"prMatrix");
// ****** text object 15 ******
var prog15  = gl.createProgram();
gl.attachShader(prog15, getShader( gl, "biplot3vshader15" ));
gl.attachShader(prog15, getShader( gl, "biplot3fshader15" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog15, 0, "aPos");
gl.bindAttribLocation(prog15, 1, "aCol");
gl.linkProgram(prog15);
var texts = [
"X"
];
var texinfo = drawTextToCanvas(texts, 1.1);  
var canvasX15 = texinfo.canvasX;
var canvasY15 = texinfo.canvasY;
var ofsLoc15 = gl.getAttribLocation(prog15, "aOfs");
var texture15 = gl.createTexture();
var texLoc15 = gl.getAttribLocation(prog15, "aTexcoord");
var sampler15 = gl.getUniformLocation(prog15,"uSampler");
handleLoadedTexture(texture15, document.getElementById("biplot3textureCanvas"));
var v=new Float32Array([
10.16067, 0, 0, 0, -0.5, 1, 1,
10.16067, 0, 0, 1, -0.5, 1, 1,
10.16067, 0, 0, 1, 1.5, 1, 1,
10.16067, 0, 0, 0, 1.5, 1, 1
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
ind = 7*(4*i + j) + 3;
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i]/width;
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight/height;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
var buf15 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf15);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var ibuf15 = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf15);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
var mvMatLoc15 = gl.getUniformLocation(prog15,"mvMatrix");
var prMatLoc15 = gl.getUniformLocation(prog15,"prMatrix");
// ****** text object 16 ******
var prog16  = gl.createProgram();
gl.attachShader(prog16, getShader( gl, "biplot3vshader16" ));
gl.attachShader(prog16, getShader( gl, "biplot3fshader16" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog16, 0, "aPos");
gl.bindAttribLocation(prog16, 1, "aCol");
gl.linkProgram(prog16);
var texts = [
"Y"
];
var texinfo = drawTextToCanvas(texts, 1.1);  
var canvasX16 = texinfo.canvasX;
var canvasY16 = texinfo.canvasY;
var ofsLoc16 = gl.getAttribLocation(prog16, "aOfs");
var texture16 = gl.createTexture();
var texLoc16 = gl.getAttribLocation(prog16, "aTexcoord");
var sampler16 = gl.getUniformLocation(prog16,"uSampler");
handleLoadedTexture(texture16, document.getElementById("biplot3textureCanvas"));
var v=new Float32Array([
0, 10.16067, 0, 0, -0.5, 1, 1,
0, 10.16067, 0, 1, -0.5, 1, 1,
0, 10.16067, 0, 1, 1.5, 1, 1,
0, 10.16067, 0, 0, 1.5, 1, 1
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
ind = 7*(4*i + j) + 3;
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i]/width;
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight/height;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
var buf16 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf16);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var ibuf16 = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf16);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
var mvMatLoc16 = gl.getUniformLocation(prog16,"mvMatrix");
var prMatLoc16 = gl.getUniformLocation(prog16,"prMatrix");
// ****** text object 17 ******
var prog17  = gl.createProgram();
gl.attachShader(prog17, getShader( gl, "biplot3vshader17" ));
gl.attachShader(prog17, getShader( gl, "biplot3fshader17" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog17, 0, "aPos");
gl.bindAttribLocation(prog17, 1, "aCol");
gl.linkProgram(prog17);
var texts = [
"Z"
];
var texinfo = drawTextToCanvas(texts, 1.1);  
var canvasX17 = texinfo.canvasX;
var canvasY17 = texinfo.canvasY;
var ofsLoc17 = gl.getAttribLocation(prog17, "aOfs");
var texture17 = gl.createTexture();
var texLoc17 = gl.getAttribLocation(prog17, "aTexcoord");
var sampler17 = gl.getUniformLocation(prog17,"uSampler");
handleLoadedTexture(texture17, document.getElementById("biplot3textureCanvas"));
var v=new Float32Array([
0, 0, 10.16067, 0, -0.5, 1, 1,
0, 0, 10.16067, 1, -0.5, 1, 1,
0, 0, 10.16067, 1, 1.5, 1, 1,
0, 0, 10.16067, 0, 1.5, 1, 1
]);
for (var i=0; i<1; i++) 
for (var j=0; j<4; j++) {
ind = 7*(4*i + j) + 3;
v[ind+2] = 2*(v[ind]-v[ind+2])*texinfo.widths[i]/width;
v[ind+3] = 2*(v[ind+1]-v[ind+3])*texinfo.textHeight/height;
v[ind] *= texinfo.widths[i]/texinfo.canvasX;
v[ind+1] = 1.0-(texinfo.offset + i*texinfo.skip 
- v[ind+1]*texinfo.textHeight)/texinfo.canvasY;
}
var f=new Uint16Array([
0, 1, 2, 0, 2, 3
]);
var buf17 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf17);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var ibuf17 = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf17);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, f, gl.STATIC_DRAW);
var mvMatLoc17 = gl.getUniformLocation(prog17,"mvMatrix");
var prMatLoc17 = gl.getUniformLocation(prog17,"prMatrix");
// ****** spheres object 18 ******
var prog18  = gl.createProgram();
gl.attachShader(prog18, getShader( gl, "biplot3vshader18" ));
gl.attachShader(prog18, getShader( gl, "biplot3fshader18" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog18, 0, "aPos");
gl.bindAttribLocation(prog18, 1, "aCol");
gl.linkProgram(prog18);
var v=new Float32Array([
0.386304, -0.06258269, -0.3346449, 0.03907949,
0.1037138, -0.4167697, 0.1894142, 0.03907949,
-0.04420828, 0.2150645, -0.1012773, 0.03907949,
0.02152008, 0.4199164, -0.176454, 0.03907949,
0.33711, 0.2325553, 0.2125145, 0.03907949,
0.2257524, -0.2631578, -0.101119, 0.03907949,
-0.0309904, 0.219315, 0.07919913, 0.03907949,
0.08821715, -0.1499639, -0.1224664, 0.03907949,
0.2950906, 0.3088075, 0.3365267, 0.03907949,
-0.4003765, -0.01001787, 0.3740094, 0.03907949,
-0.03401585, 0.3229545, 0.1116129, 0.03907949,
0.3268435, 0.187082, 0.4772242, 0.03907949,
0.1605406, -0.4132351, 0.4524682, 0.03907949,
0.5320792, -0.01888357, -0.1897967, 0.03907949,
-0.386304, 0.06258269, 0.3346449, 0.03907949,
-0.1037138, 0.4167697, -0.1894142, 0.03907949,
0.04420828, -0.2150645, 0.1012773, 0.03907949,
-0.02152008, -0.4199164, 0.176454, 0.03907949,
-0.33711, -0.2325553, -0.2125145, 0.03907949,
-0.2257524, 0.2631578, 0.101119, 0.03907949,
0.0309904, -0.219315, -0.07919913, 0.03907949,
-0.08821715, 0.1499639, 0.1224664, 0.03907949,
-0.2950906, -0.3088075, -0.3365267, 0.03907949,
0.4003765, 0.01001787, -0.3740094, 0.03907949,
0.03401585, -0.3229545, -0.1116129, 0.03907949,
-0.3268435, -0.187082, -0.4772242, 0.03907949,
-0.1605406, 0.4132351, -0.4524682, 0.03907949,
-0.5320792, 0.01888357, 0.1897967, 0.03907949
]);
var values18 = v;
var normLoc18 = gl.getAttribLocation(prog18, "aNorm");
var mvMatLoc18 = gl.getUniformLocation(prog18,"mvMatrix");
var prMatLoc18 = gl.getUniformLocation(prog18,"prMatrix");
var normMatLoc18 = gl.getUniformLocation(prog18,"normMatrix");
// ****** spheres object 19 ******
var prog19  = gl.createProgram();
gl.attachShader(prog19, getShader( gl, "biplot3vshader19" ));
gl.attachShader(prog19, getShader( gl, "biplot3fshader19" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog19, 0, "aPos");
gl.bindAttribLocation(prog19, 1, "aCol");
gl.linkProgram(prog19);
var v=new Float32Array([
10.16067, 0, 0, 0,
-10.16067, -0, -0, 0,
0, 10.16067, 0, 0,
-0, -10.16067, -0, 0,
0, 0, 10.16067, 0,
-0, -0, -10.16067, 0
]);
var values19 = v;
var normLoc19 = gl.getAttribLocation(prog19, "aNorm");
var mvMatLoc19 = gl.getUniformLocation(prog19,"mvMatrix");
var prMatLoc19 = gl.getUniformLocation(prog19,"prMatrix");
var normMatLoc19 = gl.getUniformLocation(prog19,"normMatrix");
// ****** lines object 20 ******
var prog20  = gl.createProgram();
gl.attachShader(prog20, getShader( gl, "biplot3vshader20" ));
gl.attachShader(prog20, getShader( gl, "biplot3fshader20" ));
//  Force aPos to location 0, aCol to location 1 
gl.bindAttribLocation(prog20, 0, "aPos");
gl.bindAttribLocation(prog20, 1, "aCol");
gl.linkProgram(prog20);
var v=new Float32Array([
10.16067, 10.16067, 10.16067,
-10.16067, 10.16067, 10.16067,
-10.16067, 10.16067, 10.16067,
-10.16067, -10.16067, 10.16067,
-10.16067, -10.16067, 10.16067,
10.16067, -10.16067, 10.16067,
10.16067, -10.16067, 10.16067,
10.16067, 10.16067, 10.16067,
10.16067, 10.16067, -10.16067,
-10.16067, 10.16067, -10.16067,
-10.16067, 10.16067, -10.16067,
-10.16067, -10.16067, -10.16067,
-10.16067, -10.16067, -10.16067,
10.16067, -10.16067, -10.16067,
10.16067, -10.16067, -10.16067,
10.16067, 10.16067, -10.16067,
10.16067, 10.16067, 10.16067,
10.16067, 10.16067, -10.16067,
-10.16067, 10.16067, 10.16067,
-10.16067, 10.16067, -10.16067,
-10.16067, -10.16067, 10.16067,
-10.16067, -10.16067, -10.16067,
10.16067, -10.16067, 10.16067,
10.16067, -10.16067, -10.16067
]);
var buf20 = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf20);
gl.bufferData(gl.ARRAY_BUFFER, v, gl.STATIC_DRAW);
var mvMatLoc20 = gl.getUniformLocation(prog20,"mvMatrix");
var prMatLoc20 = gl.getUniformLocation(prog20,"prMatrix");
gl.enable(gl.DEPTH_TEST);
gl.depthFunc(gl.LEQUAL);
gl.clearDepth(1.0);
gl.clearColor(1, 1, 1, 1);
var xOffs = yOffs = 0,  drag  = 0;
drawScene();
function drawScene(){
gl.depthMask(true);
gl.disable(gl.BLEND);
var radius = 19.35867;
var s = sin(fov*PI/360);
var t = tan(fov*PI/360);
var distance = radius/s;
var near = distance - radius;
var far = distance + radius;
var hlen = t*near;
var aspect = width/height;
prMatrix.makeIdentity();
if (aspect > 1)
prMatrix.frustum(-hlen*aspect*zoom, hlen*aspect*zoom, 
-hlen*zoom, hlen*zoom, near, far);
else  
prMatrix.frustum(-hlen*zoom, hlen*zoom, 
-hlen*zoom/aspect, hlen*zoom/aspect, 
near, far);
mvMatrix.makeIdentity();
mvMatrix.translate( -0, -0, -0 );
mvMatrix.scale( 1, 1, 1 );   
mvMatrix.multRight( userMatrix );  
mvMatrix.translate(0, 0, -distance);
normMatrix.makeIdentity();
normMatrix.scale( 1, 1, 1 );   
normMatrix.multRight( userMatrix );
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
// ****** spheres object 8 *******
gl.useProgram(prog8);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( prMatLoc8, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc8, false, new Float32Array(mvMatrix.getAsArray()) );
gl.uniformMatrix4fv( normMatLoc8, false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(normLoc8 );
gl.vertexAttribPointer(normLoc8,  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1, 1, 1);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( normMatLoc8, false, new Float32Array(sphereNorm.getAsArray()) );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1);
for (var i = 0; i < 15; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*4
var ofs = baseofs + 3;         
var scale = values8[ofs];
sphereMV.scale(1*scale, 1*scale, 1*scale);
sphereMV.translate(values8[baseofs], 
values8[baseofs+1], 
values8[baseofs+2]);
sphereMV.multRight(mvMatrix);
gl.uniformMatrix4fv( mvMatLoc8, false, new Float32Array(sphereMV.getAsArray()) );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
// ****** text object 9 *******
gl.useProgram(prog9);
gl.bindBuffer(gl.ARRAY_BUFFER, buf9);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf9);
gl.uniformMatrix4fv( prMatLoc9, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc9, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( texLoc9 );
gl.vertexAttribPointer(texLoc9, 2, gl.FLOAT, false, 28, 12);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, texture9);
gl.uniform1i( sampler9, 0);
gl.enableVertexAttribArray( ofsLoc9 );
gl.vertexAttribPointer(ofsLoc9, 2, gl.FLOAT, false, 28, 20);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 28,  0);
gl.drawElements(gl.TRIANGLES, 90, gl.UNSIGNED_SHORT, 0);
// ****** lines object 10 *******
gl.useProgram(prog10);
gl.bindBuffer(gl.ARRAY_BUFFER, buf10);
gl.uniformMatrix4fv( prMatLoc10, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc10, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0.7450981, 0.7450981, 0.7450981, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.drawArrays(gl.LINES, 0, 56);
// ****** text object 11 *******
gl.useProgram(prog11);
gl.bindBuffer(gl.ARRAY_BUFFER, buf11);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf11);
gl.uniformMatrix4fv( prMatLoc11, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc11, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0.4, 0.4, 0.4, 1 );
gl.enableVertexAttribArray( texLoc11 );
gl.vertexAttribPointer(texLoc11, 2, gl.FLOAT, false, 28, 12);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, texture11);
gl.uniform1i( sampler11, 0);
gl.enableVertexAttribArray( ofsLoc11 );
gl.vertexAttribPointer(ofsLoc11, 2, gl.FLOAT, false, 28, 20);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 28,  0);
gl.drawElements(gl.TRIANGLES, 168, gl.UNSIGNED_SHORT, 0);
// ****** linestrip object 12 *******
gl.useProgram(prog12);
gl.bindBuffer(gl.ARRAY_BUFFER, buf12);
gl.uniformMatrix4fv( prMatLoc12, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc12, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.drawArrays(gl.LINE_STRIP, 0, 2);
// ****** linestrip object 13 *******
gl.useProgram(prog13);
gl.bindBuffer(gl.ARRAY_BUFFER, buf13);
gl.uniformMatrix4fv( prMatLoc13, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc13, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.drawArrays(gl.LINE_STRIP, 0, 2);
// ****** linestrip object 14 *******
gl.useProgram(prog14);
gl.bindBuffer(gl.ARRAY_BUFFER, buf14);
gl.uniformMatrix4fv( prMatLoc14, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc14, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.drawArrays(gl.LINE_STRIP, 0, 2);
// ****** text object 15 *******
gl.useProgram(prog15);
gl.bindBuffer(gl.ARRAY_BUFFER, buf15);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf15);
gl.uniformMatrix4fv( prMatLoc15, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc15, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( texLoc15 );
gl.vertexAttribPointer(texLoc15, 2, gl.FLOAT, false, 28, 12);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, texture15);
gl.uniform1i( sampler15, 0);
gl.enableVertexAttribArray( ofsLoc15 );
gl.vertexAttribPointer(ofsLoc15, 2, gl.FLOAT, false, 28, 20);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 28,  0);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
// ****** text object 16 *******
gl.useProgram(prog16);
gl.bindBuffer(gl.ARRAY_BUFFER, buf16);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf16);
gl.uniformMatrix4fv( prMatLoc16, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc16, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( texLoc16 );
gl.vertexAttribPointer(texLoc16, 2, gl.FLOAT, false, 28, 12);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, texture16);
gl.uniform1i( sampler16, 0);
gl.enableVertexAttribArray( ofsLoc16 );
gl.vertexAttribPointer(ofsLoc16, 2, gl.FLOAT, false, 28, 20);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 28,  0);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
// ****** text object 17 *******
gl.useProgram(prog17);
gl.bindBuffer(gl.ARRAY_BUFFER, buf17);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf17);
gl.uniformMatrix4fv( prMatLoc17, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc17, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0, 0, 0, 1 );
gl.enableVertexAttribArray( texLoc17 );
gl.vertexAttribPointer(texLoc17, 2, gl.FLOAT, false, 28, 12);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, texture17);
gl.uniform1i( sampler17, 0);
gl.enableVertexAttribArray( ofsLoc17 );
gl.vertexAttribPointer(ofsLoc17, 2, gl.FLOAT, false, 28, 20);
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 28,  0);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
// ****** spheres object 18 *******
gl.useProgram(prog18);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( prMatLoc18, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc18, false, new Float32Array(mvMatrix.getAsArray()) );
gl.uniformMatrix4fv( normMatLoc18, false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(normLoc18 );
gl.vertexAttribPointer(normLoc18,  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1, 1, 1);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( normMatLoc18, false, new Float32Array(sphereNorm.getAsArray()) );
gl.vertexAttrib4f( colLoc, 0.4, 0.4, 0.4, 1);
for (var i = 0; i < 28; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*4
var ofs = baseofs + 3;         
var scale = values18[ofs];
sphereMV.scale(1*scale, 1*scale, 1*scale);
sphereMV.translate(values18[baseofs], 
values18[baseofs+1], 
values18[baseofs+2]);
sphereMV.multRight(mvMatrix);
gl.uniformMatrix4fv( mvMatLoc18, false, new Float32Array(sphereMV.getAsArray()) );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
// ****** spheres object 19 *******
gl.useProgram(prog19);
gl.bindBuffer(gl.ARRAY_BUFFER, sphereBuf);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sphereIbuf);
gl.uniformMatrix4fv( prMatLoc19, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc19, false, new Float32Array(mvMatrix.getAsArray()) );
gl.uniformMatrix4fv( normMatLoc19, false, new Float32Array(normMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.enableVertexAttribArray(normLoc19 );
gl.vertexAttribPointer(normLoc19,  3, gl.FLOAT, false, 12,  0);
gl.disableVertexAttribArray( colLoc );
var sphereNorm = new CanvasMatrix4();
sphereNorm.scale(1, 1, 1);
sphereNorm.multRight(normMatrix);
gl.uniformMatrix4fv( normMatLoc19, false, new Float32Array(sphereNorm.getAsArray()) );
gl.vertexAttrib4f( colLoc, 1, 1, 1, 1);
for (var i = 0; i < 6; i++) {
var sphereMV = new CanvasMatrix4();
var baseofs = i*4
var ofs = baseofs + 3;         
var scale = values19[ofs];
sphereMV.scale(1*scale, 1*scale, 1*scale);
sphereMV.translate(values19[baseofs], 
values19[baseofs+1], 
values19[baseofs+2]);
sphereMV.multRight(mvMatrix);
gl.uniformMatrix4fv( mvMatLoc19, false, new Float32Array(sphereMV.getAsArray()) );
gl.drawElements(gl.TRIANGLES, 384, gl.UNSIGNED_SHORT, 0);
}
// ****** lines object 20 *******
gl.useProgram(prog20);
gl.bindBuffer(gl.ARRAY_BUFFER, buf20);
gl.uniformMatrix4fv( prMatLoc20, false, new Float32Array(prMatrix.getAsArray()) );
gl.uniformMatrix4fv( mvMatLoc20, false, new Float32Array(mvMatrix.getAsArray()) );
gl.enableVertexAttribArray( posLoc );
gl.disableVertexAttribArray( colLoc );
gl.vertexAttrib4f( colLoc, 0.6, 0.6, 0.6, 1 );
gl.lineWidth( 1 );
gl.vertexAttribPointer(posLoc,  3, gl.FLOAT, false, 12,  0);
gl.drawArrays(gl.LINES, 0, 24);
gl.flush ();
}
var vlen = function(v) {
return sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2])
}
var xprod = function(a, b) {
return [a[1]*b[2] - a[2]*b[1],
a[2]*b[0] - a[0]*b[2],
a[0]*b[1] - a[1]*b[0]];
}
var screenToVector = function(x, y) {
var radius = max(width, height)/2.0;
var cx = width/2.0;
var cy = height/2.0;
var px = (x-cx)/radius;
var py = (y-cy)/radius;
var plen = sqrt(px*px+py*py);
if (plen > 1.e-6) { 
px = px/plen;
py = py/plen;
}
var angle = (SQRT2 - plen)/SQRT2*PI/2;
var z = sin(angle);
var zlen = sqrt(1.0 - z*z);
px = px * zlen;
py = py * zlen;
return [px, py, z];
}
var rotBase;
var trackballdown = function(x,y) {
rotBase = screenToVector(x, y);
saveMat.load(userMatrix);
}
var trackballmove = function(x,y) {
var rotCurrent = screenToVector(x,y);
var dot = rotBase[0]*rotCurrent[0] + 
rotBase[1]*rotCurrent[1] + 
rotBase[2]*rotCurrent[2];
var angle = acos( dot/vlen(rotBase)/vlen(rotCurrent) )*180./PI;
var axis = xprod(rotBase, rotCurrent);
userMatrix.load(saveMat);
userMatrix.rotate(angle, axis[0], axis[1], axis[2]);
drawScene();
}
var y0zoom = 0;
var zoom0 = 1;
var zoomdown = function(x, y) {
y0zoom = y;
zoom0 = log(zoom);
}
var zoommove = function(x, y) {
zoom = exp(zoom0 + (y-y0zoom)/height);
drawScene();
}
var y0fov = 0;
var fov0 = 1;
var fovdown = function(x, y) {
y0fov = y;
fov0 = fov;
}
var fovmove = function(x, y) {
fov = max(1, min(179, fov0 + 180*(y-y0fov)/height));
drawScene();
}
var mousedown = [trackballdown, zoomdown, fovdown];
var mousemove = [trackballmove, zoommove, fovmove];
function relMouseCoords(event){
var totalOffsetX = 0;
var totalOffsetY = 0;
var currentElement = canvas;
do{
totalOffsetX += currentElement.offsetLeft;
totalOffsetY += currentElement.offsetTop;
}
while(currentElement = currentElement.offsetParent)
var canvasX = event.pageX - totalOffsetX;
var canvasY = event.pageY - totalOffsetY;
return {x:canvasX, y:canvasY}
}
canvas.onmousedown = function ( ev ){
if (!ev.which) // Use w3c defns in preference to MS
switch (ev.button) {
case 0: ev.which = 1; break;
case 1: 
case 4: ev.which = 2; break;
case 2: ev.which = 3;
}
drag = ev.which;
var f = mousedown[drag-1];
if (f) {
var coords = relMouseCoords(ev);
f(coords.x, height-coords.y); 
ev.preventDefault();
}
}    
canvas.onmouseup = function ( ev ){ 
drag = 0;
}
canvas.onmouseout = canvas.onmouseup;
canvas.onmousemove = function ( ev ){
if ( drag == 0 ) return;
var f = mousemove[drag-1];
if (f) {
var coords = relMouseCoords(ev);
f(coords.x, height-coords.y);
}
}
var wheelHandler = function(ev) {
var del = 1.1;
if (ev.shiftKey) del = 1.01;
var ds = ((ev.detail || ev.wheelDelta) > 0) ? del : (1 / del);
zoom *= ds;
drawScene();
ev.preventDefault();
};
canvas.addEventListener("DOMMouseScroll", wheelHandler, false);
canvas.addEventListener("mousewheel", wheelHandler, false);
}
</script>
<canvas id="biplot3canvas" width="1" height="1">
</canvas>
<p id="biplot3debug">
You must enable Javascript to view this page properly.
</p>
<script>biplot3webGLStart();</script>
</div>
</div>
<div id="pre-transformations" class="section level3">
<h3>Pre-transformations</h3>
<p>When representing grid data a decision has to be made whether to apply pre-transformations to the data before submitting it to the SVD. These transformations include the <strong>centering</strong> and the <strong>normalization</strong> of the data. In the INGRID procedure (Slater, 1977) the centering of the constructs, i.e. removing the mean value of each row, is used as a default option. Other theorists argue that “double-centering” (i.e. by row and column means) (e.g. Hope, 1966) or that midpoint centering is appropriate to analyze grid data (Raeithel, 1998). The question if or not and which kind of pre-treatment is to be applied has no definite answer and will not be followed here. Note however that different options in pre-treatment results in different spatial representations. Hence, the researcher has to be aware of the influence the pre-treatment exerts onto the spatial representation.</p>
<p>In OpenRepGrid different options for centering and normalization (also called scaling) are included. The <strong>centering</strong> option for rows and columns of a matrix in yields four possible combinations: 1) construct centering, 2) element centering, 3) double-centering and 4) construct midpoint centering. The last option is also denoted “double-centering” of a grid. For normalization three options can be chosen: 0) no normalization, 1) normalization of constructs and 2) normalization of elements. A simultaneous normalization of rows and columns is not possible.</p>
<p>If the output is affected by pre-scaling the corresponding function in OpenRepGrid offers an argument to specify the form of pre-scaling to be used. The following figures demonstrate how different forms of pre-scaling lead to different representation.</p>
<pre class="r"><code>biplot2d(boeker, center=1, normalize=0)</code></pre>
<p><img src="visualization_biplot_files/figure-html/biplot2d-transforms-1.png" title="" alt="" width="672" /></p>
<pre class="r"><code>biplot2d(boeker, center=2, normalize=0)</code></pre>
<p><img src="visualization_biplot_files/figure-html/biplot2d-transforms-2.png" title="" alt="" width="672" /></p>
<pre class="r"><code>biplot2d(boeker, center=1, normalize=2)</code></pre>
<p><img src="visualization_biplot_files/figure-html/biplot2d-transforms-3.png" title="" alt="" width="672" /></p>
</div>
<div id="standard-biplot-types" class="section level3">
<h3>Standard biplot types</h3>
<p>The type of biplot that is produced depends on the way the singular values are assigned to the elements and constructs matrices (see calculation of a biplot). Two parameters steer the assignment: <span class="math">\(g\)</span> and <span class="math">\(h\)</span>. Depending on the choice of these parameters and the form of pre-transformations used, different types of biplots are plotted. The following three biplots represent the three most important ones.</p>
<div id="element-metric-preserving-biplot" class="section level4">
<h4>Element metric preserving biplot</h4>
<p>The standard biplot function preserves the distances between the elements, i.e. a form biplot.</p>
<pre class="r"><code>biplot2d(boeker)
biplotPseudo3d(boeker)
biplot3d(boeker)</code></pre>
</div>
<div id="slaters-ingrid-biplot" class="section level4">
<h4>Slater’s INGRID biplot</h4>
<p>The first version of a joint spatial representation of elements and constructs has become known as Slater’s INGRID biplot. The default is to use row centering and no normalization. Note that Slater’s biplot is just a special case of a biplot that can be produced using the <code>biplot2d</code> function with the arguments <code>center=1</code>, <code>g=1</code>, <code>h=1</code>. The arguments that can be used in this function are the same as in <code>biplot2d</code>.</p>
<pre class="r"><code>biplotSlater2d(boeker)
biplot2d(boeker, center=1, g=1, h=1)      # compare to previous plot

biplotSlaterPseudo3d(boeker)
biplotSlater3d(boeker)</code></pre>
</div>
<div id="eigenstructure-analysis-esa-biplot" class="section level4">
<h4>Eigenstructure analysis (ESA) biplot</h4>
<p>The ESA is a special type of biplot suggested by Raeithel (e.g. 1998). It uses midpoint centering as a default. Note that the eigenstructure analysis is just a special case of a biplot that can also be produced using the <code>biplot2d</code> function with the arguments <code>center=4</code>, <code>g=1</code>, <code>h=1</code>.</p>
<pre class="r"><code>biplotEsa2d(boeker)
biplot2d(boeker, center=1, g=1, h=1)      # compare to previous plot

biplotEsaPseudo3d(boeker)
biplotEsa3d(boeker)</code></pre>
</div>
</div>
<div id="changing-the-appearance" class="section level3">
<h3>Changing the appearance</h3>
<p>A lot of arguments affecting the appearance of the biplot can be changed. For a full list see biplot2d. The following codes correspond to the figures in the gallery below. It gives an impression of what can be changed in <code>biplot2d</code>. Most arguments also apply to the other biplot functions (see above).</p>
<pre class="r"><code>biplot2d(boeker, e.label.col=&quot;red&quot;, c.label.col=&quot;blue&quot;)   # plot1: change label colors
biplot2d(boeker, e.point.col=&quot;red&quot;, c.point.col=&quot;blue&quot;)   # plot2: change symbol colors

biplot2d(boeker, e.label.cex=1, c.label.cex=.5)           # plot3: change label size
biplot2d(boeker, e.point.cex=1.5, c.point.cex=.5)         # plot4 :change symbol size

biplot2d(boeker, zoom=.5)                                 # plot5: zoom out
biplot2d(boeker, zoom=2.5)                                # plot6: zoom in

biplot2d(boeker, unity=T)                                 # plot7: scale construct &amp; element vectors to equal length
biplot2d(boeker, unity=T, scale.e=.5)                     # plot8: scaling factor for element vectors

biplot2d(boeker, e.labels.show=F)                         # plot9: do not show element labels
biplot2d(boeker, e.labels.show=c(1,2,4))                  # plot10: show labels for elements 1, 2 and 4
biplot2d(boeker, e.points.show=c(1,2,4))                  # plot11: only show elements 1, 2 and 4
biplot2d(boeker, c.labels.show=1:4)                       # plot12: show constructs labels 1 to 4   

biplot2d(boeker, g=1, h=1, c.labels.inside=T,             # plot13: different margins and element color 
         mai=c(0,0,0,0), e.label.col=&quot;blue&quot;) 

biplot2d(boeker, flipaxes=c(T, F))                        # plot14: flip x axis

biplot2d(boeker, outer.positioning=F)                     # plot15: no positioning of construct labels
biplot2d(boeker, c.labels.devangle=20)                    # plot16: only show constructs within 20 degree angle from xy plane</code></pre>
</div>
<div id="calculation-of-biplots" class="section level3">
<h3>Calculation of biplots</h3>
<p>The central concept is to factorize the data matrix <span class="math">\(X\)</span> into two matrices <span class="math">\(G\)</span> and <span class="math">\(H\)</span> such that</p>
<p><span class="math">\[ X = GH^T.\]</span></p>
<p>Hence, the scalar product between a row vector of <span class="math">\(G\)</span> and a column vector of <span class="math">\(H\)</span> will reproduce the original cell value of a matrix. The scalar product has a geometrical interpretation as the projection of one vector onto the other. As the data matrix <span class="math">\(X\)</span> usually has a rank higher than two, a representation in two (or three) dimensions requires to find an optimal representation within a lower dimensional space. To find a low dimension representation the singular value decomposition is applied. It factorizes <span class="math">\(X\)</span> into three matrices: <span class="math">\(U\)</span> containing the row vectors, <span class="math">\(V\)</span> the column points and <span class="math">\(D\)</span> the singular values (root of eigenvalues) of the new principal axes.</p>
<p><span class="math">\[ X = UDV^T \]</span></p>
<p>Eckart and Young (1936) showed that the SVD has the property to yield the best lower rank approximation of <span class="math">\(X\)</span> based on. Hence, a lower dimensional representation (e.g. in two dimensions) that is optimal in a least-square sense can be written as</p>
<p><span class="math">\[ X_{[2]} = U_{[2]} D_{[2]} V_{[2]}^T \]</span></p>
<p>This representation almost already has the form required for a biplot representation. The decision to take is how to assign the singular values to the left and right matrices.</p>
<p><span class="math">\[ X = UD^g D^h V^T X = GH^T \]</span></p>
<p>In the standard biplot <span class="math">\(g=0\)</span> and <span class="math">\(h=1\)</span>. This yields a so called <em>form biplot</em>, as the metric of the elements is preserved. Several other standard representations can be expressed in terms of the parameters <span class="math">\(g\)</span>, <span class="math">\(h\)</span> and the pre-transformations (centering, normalization) applied to <span class="math">\(X\)</span>.</p>
</div>
<div id="literature" class="section level3">
<h3>Literature</h3>
<ul>
<li>Fransella, F., Bell, R. C., &amp; Bannister, D. (2003). A Manual for Repertory Grid Technique (2. ed.). Chichester: John Wiley &amp; Sons.</li>
<li>Gower, J., Lubbe, S. G., Gardner, S., &amp; Roux, N. L. (2011). Understanding Biplots. John Wiley and Sons.</li>
<li>Greenacre, M. (2010). Biplots in practice. Madrid: BBVA Foundation. Retrieved from <a href="http://www.multivariatestatistics.org/biplots.html" class="uri">http://www.multivariatestatistics.org/biplots.html</a></li>
<li>Hope, K. (1966). Cos and Cosmos: Considerations on Patrick Slater’s Monograph The Principal Components of a Repertory Grid. British Journal of Psychiatry, 66(112), 1155 - 1163.</li>
<li>Raeithel, A. (1998). Kooperative Modellproduktion von Professionellen und Klienten – erläutert am Beispiel des Repertory Grid. In Selbstorganisation, Kooperation, Zeichenprozeß : Arbeiten zu einer kulturwissenschaftlichen, anwendungsbezogenen Psychologie (pp. 209-254). Opladen: Westdeutscher Verlag.</li>
<li>Slater, P. (1964). The Principal Components of a Repertory. London: Vincent Andrews &amp; Co.</li>
<li>Slater, P. (1977). The measurement of intrapersonal space by Grid technique. London: Wiley.</li>
</ul>
</div>


<!-- some extra javascript for older browsers -->
<script type="text/javascript" src="libs/polyfill.js"></script>

<script>

// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname
    href = href.substr(href.lastIndexOf('/') + 1)
    $('a[href="' + href + '"]').parent().addClass('active');

    // manage active menu header
    if (href.startsWith('authoring_'))
      $('a[href="' + 'authoring' + '"]').parent().addClass('active');
    else if (href.endsWith('_format.html'))
      $('a[href="' + 'formats' + '"]').parent().addClass('active');
    else if (href.startsWith('developer_'))
      $('a[href="' + 'developer' + '"]').parent().addClass('active');

});

</script>

<!-- disqus -->
<div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'docu-openrepgrid'; 

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


<!--- google analytics -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54969723-1', 'auto');
  ga('send', 'pageview');

</script>

<!--- swifttype site search  -->

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','Xx8jcW_vEf2sJzxCHwAM');
</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
